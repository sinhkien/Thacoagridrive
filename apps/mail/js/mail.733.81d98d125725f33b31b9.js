/*! For license information please see mail.733.81d98d125725f33b31b9.js.LICENSE.txt */
"use strict";(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[733],{75596:function(t,n,e){var a=e(87537),o=e.n(a),r=e(23645),i=e.n(r)()(o());i.push([t.id,"[data-v-622bb4c1] .tabs-component-tabs{display:flex}[data-v-622bb4c1] .tabs-component-tab{flex-grow:1;text-align:center;color:var(--color-text-lighter);margin-bottom:10px}[data-v-622bb4c1] .tabs-component-tab.is-active{border-bottom:1px solid #000;font-weight:bold}.tabs-component-panels[data-v-622bb4c1]{padding-top:20px}.tabs-component-panels label[data-v-622bb4c1]{text-align:left;width:100%;display:inline-block}.tabs-component-panels input[data-v-622bb4c1],.tabs-component-panels select[data-v-622bb4c1]{margin-bottom:10px}","",{version:3,sources:["webpack://./src/components/AccountForm.vue"],names:[],mappings:"AACA,uCACC,YAAA,CAGD,sCACC,WAAA,CACA,iBAAA,CACA,+BAAA,CACA,kBAAA,CAGD,gDACC,4BAAA,CACA,gBAAA,CAGD,wCACC,gBAAA,CAGD,8CACC,eAAA,CACA,UAAA,CACA,oBAAA,CAGD,6FAEC,kBAAA",sourcesContent:["\n:deep(.tabs-component-tabs) {\n\tdisplay: flex;\n}\n\n:deep(.tabs-component-tab) {\n\tflex-grow: 1;\n\ttext-align: center;\n\tcolor: var(--color-text-lighter);\n\tmargin-bottom: 10px;\n}\n\n:deep(.tabs-component-tab.is-active) {\n\tborder-bottom: 1px solid black;\n\tfont-weight: bold;\n}\n\n.tabs-component-panels {\n\tpadding-top: 20px;\n}\n\n.tabs-component-panels label {\n\ttext-align: left;\n\twidth: 100%;\n\tdisplay: inline-block;\n}\n\n.tabs-component-panels input,\n.tabs-component-panels select {\n\tmargin-bottom: 10px;\n}\n"],sourceRoot:""}]),n.Z=i},39627:function(t,n,e){var a=e(87537),o=e.n(a),r=e(23645),i=e.n(r)()(o());i.push([t.id,"\nh4[data-v-622bb4c1] {\n\ttext-align: left;\n}\n.flex-row[data-v-622bb4c1] {\n\tdisplay: flex;\n}\nlabel.button[data-v-622bb4c1] {\n\tdisplay: inline-block;\n\ttext-align: center;\n\tflex-grow: 1;\n}\nlabel.primary[data-v-622bb4c1] {\n\tcolor: var(--color-main-background);\n}\ninput.primary[data-v-622bb4c1] {\n\tcolor: var(--color-main-background);\n}\ninput[type='radio'][data-v-622bb4c1] {\n\tdisplay: none;\n}\ninput[type='radio'][disabled] + label[data-v-622bb4c1] {\n\tcursor: default;\n\topacity: 0.5;\n}\n.account-form__label--required[data-v-622bb4c1]:after {\n\tcontent:\" *\";\n}\n.account-form__heading--required[data-v-622bb4c1]:after {\n\tcontent:\" *\";\n}\n.account-form__submit-buttons[data-v-622bb4c1] {\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin-top: 5px;\n}\n.account-form__submit-button[data-v-622bb4c1] {\n\tdisplay: flex;\n\talign-items: center;\n}\n.account-form--feedback[data-v-622bb4c1] {\n\tcolor: var(--color-text-maxcontrast);\n\tmargin-top: 5px;\n\ttext-align: center;\n}\n.account-form--error[data-v-622bb4c1] {\n\ttext-align: left;\n\tfont-size: 14px;\n}\n#account-form[data-v-622bb4c1] {\n\tz-index: 1001;\n\twidth: 250px;\n\ttop: 15%;\n\tpadding-bottom: 50px;\n\tmargin: 0 auto;\n\tpadding-top: 30px;\n}\n#account-form input[data-v-622bb4c1] {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n","",{version:3,sources:["webpack://./src/components/AccountForm.vue"],names:[],mappings:";AAqrBA;CACA,gBAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,qBAAA;CACA,kBAAA;CACA,YAAA;AACA;AACA;CACA,mCAAA;AACA;AACA;CACA,mCAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,eAAA;CACA,YAAA;AACA;AACA;CACA,YAAA;AACA;AACA;CACA,YAAA;AACA;AACA;CACA,aAAA;CACA,uBAAA;CACA,eAAA;AACA;AACA;CACA,aAAA;CACA,mBAAA;AACA;AACA;CACA,oCAAA;CACA,eAAA;CACA,kBAAA;AACA;AACA;CACA,gBAAA;CACA,eAAA;AACA;AACA;CACA,aAAA;CACA,YAAA;CACA,QAAA;CACA,oBAAA;CACA,cAAA;CACA,iBAAA;AACA;AACA;CACA,WAAA;CACA,sBAAA;AACA",sourcesContent:["<template>\n\t<form id=\"account-form\" @submit.prevent=\"onSubmit\">\n\t\t<Tabs\n\t\t\t:options=\"{useUrlFragment: false, defaultTabHash: settingsPage ? 'manual' : 'auto'}\"\n\t\t\tcache-lifetime=\"0\"\n\t\t\t@changed=\"onModeChanged\">\n\t\t\t<Tab id=\"auto\" key=\"auto\" :name=\"t('mail', 'Auto')\">\n\t\t\t\t<label for=\"auto-name\">{{ t('mail', 'Name') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"auto-name\"\n\t\t\t\t\tv-model=\"accountName\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Name')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\tautofocus>\n\t\t\t\t<label for=\"auto-address\" class=\"account-form__label--required\">{{ t('mail', 'Mail address') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"auto-address\"\n\t\t\t\t\tv-model.lazy=\"emailAddress\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t:placeholder=\"t('mail', 'name@example.org')\"\n\t\t\t\t\trequired\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t@blur=\"isValidEmail(emailAddress)\"\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<p v-if=\"!isValidEmail(emailAddress)\" class=\"account-form--error\">\n\t\t\t\t\t{{ t('mail', 'Please enter an email of the format name@example.com') }}\n\t\t\t\t</p>\n\t\t\t\t<label for=\"auto-password\"\n\t\t\t\t\t:class=\"{ 'account-form__label': hasPasswordAlternatives, 'account-form__label--required': !hasPasswordAlternatives }\">{{ t('mail', 'Password') }}</label>\n\t\t\t\t<input id=\"auto-password\"\n\t\t\t\t\tv-model=\"autoConfig.password\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Password')\"\n\t\t\t\t\t:required=\"!hasPasswordAlternatives\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t</Tab>\n\t\t\t<Tab id=\"manual\" key=\"manual\" :name=\"t('mail', 'Manual')\">\n\t\t\t\t<label for=\"man-name\">{{ t('mail', 'Name') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-name\"\n\t\t\t\t\tv-model=\"accountName\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Name')\"\n\t\t\t\t\t:disabled=\"loading\">\n\t\t\t\t<label for=\"man-address\" class=\"account-form__label--required\">{{ t('mail', 'Mail address') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-address\"\n\t\t\t\t\tv-model.lazy=\"emailAddress\"\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t:placeholder=\"t('mail', 'name@example.org')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@blur=\"isValidEmail(emailAddress)\"\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<p v-if=\"!isValidEmail(emailAddress)\" class=\"account-form--error\">\n\t\t\t\t\t{{ t('mail', 'Please enter an email of the format name@example.com') }}\n\t\t\t\t</p>\n\n\t\t\t\t<h3>{{ t('mail', 'IMAP Settings') }}</h3>\n\t\t\t\t<label for=\"man-imap-host\" class=\"account-form__label--required\">{{ t('mail', 'IMAP Host') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-imap-host\"\n\t\t\t\t\tv-model=\"manualConfig.imapHost\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP Host')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<h4 class=\"account-form__heading--required\">\n\t\t\t\t\t{{ t('mail', 'IMAP Security') }}\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"man-imap-sec-none\"\n\t\t\t\t\t\tv-model=\"manualConfig.imapSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-imap-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"none\"\n\t\t\t\t\t\t@change=\"onImapSslModeChange\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tfor=\"man-imap-sec-none\"\n\t\t\t\t\t\t:class=\"{primary: manualConfig.imapSslMode === 'none'}\">{{ t('mail', 'None') }}</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"man-imap-sec-ssl\"\n\t\t\t\t\t\tv-model=\"manualConfig.imapSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-imap-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"ssl\"\n\t\t\t\t\t\t@change=\"onImapSslModeChange\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tfor=\"man-imap-sec-ssl\"\n\t\t\t\t\t\t:class=\"{primary: manualConfig.imapSslMode === 'ssl'}\">{{ t('mail', 'SSL/TLS') }}</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"man-imap-sec-tls\"\n\t\t\t\t\t\tv-model=\"manualConfig.imapSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-imap-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"tls\"\n\t\t\t\t\t\t@change=\"onImapSslModeChange\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tfor=\"man-imap-sec-tls\"\n\t\t\t\t\t\t:class=\"{primary: manualConfig.imapSslMode === 'tls'}\">{{ t('mail', 'STARTTLS') }}</label>\n\t\t\t\t</div>\n\t\t\t\t<label for=\"man-imap-port\" class=\"account-form__label--required\">{{ t('mail', 'IMAP Port') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-imap-port\"\n\t\t\t\t\tv-model=\"manualConfig.imapPort\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP Port')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<label for=\"man-imap-user\" class=\"account-form__label--required\">{{ t('mail', 'IMAP User') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-imap-user\"\n\t\t\t\t\tv-model=\"manualConfig.imapUser\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP User')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<label v-if=\"!useOauth\" for=\"man-imap-password\" class=\"account-form__label--required\">{{ t('mail', 'IMAP Password') }}</label>\n\t\t\t\t<input v-if=\"!useOauth\"\n\t\t\t\t\tid=\"man-imap-password\"\n\t\t\t\t\tv-model=\"manualConfig.imapPassword\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP Password')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\n\t\t\t\t<h3>{{ t('mail', 'SMTP Settings') }}</h3>\n\t\t\t\t<label for=\"man-smtp-host\" class=\"account-form__label--required\">{{ t('mail', 'SMTP Host') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-smtp-host\"\n\t\t\t\t\tref=\"smtpHost\"\n\t\t\t\t\tv-model=\"manualConfig.smtpHost\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"smtp-host\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP Host')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<h4 class=\"account-form__heading--required\">\n\t\t\t\t\t{{ t('mail', 'SMTP Security') }}\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"man-smtp-sec-none\"\n\t\t\t\t\t\tv-model=\"manualConfig.smtpSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-smtp-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"none\"\n\t\t\t\t\t\t@change=\"onSmtpSslModeChange\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tfor=\"man-smtp-sec-none\"\n\t\t\t\t\t\t:class=\"{primary: manualConfig.smtpSslMode === 'none'}\">{{ t('mail', 'None') }}</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"man-smtp-sec-ssl\"\n\t\t\t\t\t\tv-model=\"manualConfig.smtpSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-smtp-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"ssl\"\n\t\t\t\t\t\t@change=\"onSmtpSslModeChange\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tfor=\"man-smtp-sec-ssl\"\n\t\t\t\t\t\t:class=\"{primary: manualConfig.smtpSslMode === 'ssl'}\">{{ t('mail', 'SSL/TLS') }}</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"man-smtp-sec-tls\"\n\t\t\t\t\t\tv-model=\"manualConfig.smtpSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-smtp-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"tls\"\n\t\t\t\t\t\t@change=\"onSmtpSslModeChange\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tfor=\"man-smtp-sec-tls\"\n\t\t\t\t\t\t:class=\"{primary: manualConfig.smtpSslMode === 'tls'}\">{{ t('mail', 'STARTTLS') }}</label>\n\t\t\t\t</div>\n\t\t\t\t<label for=\"man-smtp-port\" class=\"account-form__label--required\">{{ t('mail', 'SMTP Port') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-smtp-port\"\n\t\t\t\t\tv-model=\"manualConfig.smtpPort\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP Port')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<label for=\"man-smtp-user\" class=\"account-form__label--required\">{{ t('mail', 'SMTP User') }}</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"man-smtp-user\"\n\t\t\t\t\tv-model=\"manualConfig.smtpUser\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP User')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t\t<label v-if=\"!useOauth\" for=\"man-smtp-password\" class=\"account-form__label--required\">{{ t('mail', 'SMTP Password') }}</label>\n\t\t\t\t<input v-if=\"!useOauth\"\n\t\t\t\t\tid=\"man-smtp-password\"\n\t\t\t\t\tv-model=\"manualConfig.smtpPassword\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP Password')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\">\n\t\t\t</Tab>\n\t\t</Tabs>\n\t\t<div v-if=\"isGoogleAccount && !googleOauthUrl\" class=\"account-form__google-sso\">\n\t\t\t{{ t('mail', 'For the Google account to work with this app you need to enable two-factor authentication for Google and generate an app password.') }}\n\t\t</div>\n\t\t<div class=\"account-form__submit-buttons\">\n\t\t\t<ButtonVue v-if=\"mode === 'auto'\"\n\t\t\t\t:aria-label=\"submitButtonText\"\n\t\t\t\tclass=\"account-form__submit-button\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\tnative-type=\"submit\"\n\t\t\t\t:disabled=\"isDisabledAuto || loading\"\n\t\t\t\t@click.prevent=\"onSubmit\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t<IconCheck v-else :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ submitButtonText }}\n\t\t\t</ButtonVue>\n\t\t\t<ButtonVue v-else-if=\"mode === 'manual'\"\n\t\t\t\t:aria-label=\"submitButtonText\"\n\t\t\t\tclass=\"account-form__submit-button\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\tnative-type=\"submit\"\n\t\t\t\t:disabled=\"isDisabledManual || loading\"\n\t\t\t\t@click.prevent=\"onSubmit\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t<IconCheck v-else :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ submitButtonText }}\n\t\t\t</ButtonVue>\n\t\t</div>\n\t\t<div v-if=\"feedback\" class=\"account-form--feedback\">\n\t\t\t{{ feedback }}\n\t\t</div>\n\t</form>\n</template>\n\n<script>\nimport { Tab, Tabs } from 'vue-tabs-component'\nimport { mapGetters } from 'vuex'\nimport { NcButton as ButtonVue, NcLoadingIcon as IconLoading } from '@nextcloud/vue'\nimport IconCheck from 'vue-material-design-icons/Check'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport logger from '../logger'\nimport {\n\tqueryIspdb,\n\tqueryMx,\n\ttestConnectivity,\n} from '../service/AutoConfigService'\nimport { CONSENT_ABORTED, getUserConsent } from '../integration/oauth'\n\nexport default {\n\tname: 'AccountForm',\n\tcomponents: {\n\t\tTab,\n\t\tTabs,\n\t\tButtonVue,\n\t\tIconLoading,\n\t\tIconCheck,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tdata() {\n\t\tconst fromAccountOr = (prop, def) => {\n\t\t\tif (this.account !== undefined) {\n\t\t\t\treturn this.account[prop]\n\t\t\t} else {\n\t\t\t\treturn def\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tloadingMessage: undefined,\n\t\t\tmode: 'auto',\n\t\t\taccountName: this.displayName,\n\t\t\temailAddress: this.email,\n\t\t\tautoConfig: {\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t\tmanualConfig: {\n\t\t\t\timapHost: fromAccountOr('imapHost', ''),\n\t\t\t\timapPort: fromAccountOr('imapPort', 993),\n\t\t\t\timapSslMode: fromAccountOr('imapSslMode', 'ssl'),\n\t\t\t\timapUser: fromAccountOr('imapUser', ''),\n\t\t\t\timapPassword: '',\n\t\t\t\tsmtpHost: fromAccountOr('smtpHost', ''),\n\t\t\t\tsmtpPort: fromAccountOr('smtpPort', 587),\n\t\t\t\tsmtpSslMode: fromAccountOr('smtpSslMode', 'tls'),\n\t\t\t\tsmtpUser: fromAccountOr('smtpUser', ''),\n\t\t\t\tsmtpPassword: '',\n\t\t\t},\n\t\t\tfeedback: null,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'googleOauthUrl',\n\t\t\t'microsoftOauthUrl',\n\t\t]),\n\n\t\tsettingsPage() {\n\t\t\treturn this.account !== undefined\n\t\t},\n\n\t\tisDisabledAuto() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (this.mode !== 'auto') {\n\t\t\t\treturn this.loading\n\t\t\t}\n\n\t\t\treturn !this.emailAddress || !this.isValidEmail(this.emailAddress)\n\t\t\t\t|| (!this.googleOauthUrl && !this.autoConfig.password)\n\t\t},\n\n\t\tisDisabledManual() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (this.mode !== 'manual') {\n\t\t\t\treturn this.loading\n\t\t\t}\n\n\t\t\treturn !this.emailAddress || !this.isValidEmail(this.emailAddress)\n\t\t\t\t|| !this.manualConfig.imapHost || !this.manualConfig.imapPort\n\t\t\t\t|| !this.manualConfig.imapUser || (!this.useOauth && !this.manualConfig.imapPassword)\n\t\t\t\t|| !this.manualConfig.smtpHost || !this.manualConfig.smtpPort\n\t\t\t\t|| !this.manualConfig.smtpUser || (!this.useOauth && !this.manualConfig.smtpPassword)\n\t\t},\n\n\t\tisGoogleAccount() {\n\t\t\treturn this.manualConfig.imapHost === 'imap.gmail.com'\n\t\t\t\t|| this.manualConfig.smtpHost === 'smtp.gmail.com'\n\t\t},\n\n\t\tisMicrosoftAccount() {\n\t\t\treturn this.manualConfig.imapHost === 'outlook.office365.com'\n\t\t\t\t|| this.manualConfig.smtpHost === 'outlook.office365.com'\n\t\t},\n\n\t\thasPasswordAlternatives() {\n\t\t\treturn !!this.googleOauthUrl\n\t\t\t\t|| !!this.microsoftOauthUrl\n\t\t},\n\n\t\tuseOauth() {\n\t\t\treturn (this.isGoogleAccount && this.googleOauthUrl)\n\t\t\t\t|| (this.isMicrosoftAccount && this.microsoftOauthUrl)\n\t\t},\n\n\t\tsubmitButtonText() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn this.loadingMessage ?? t('mail', 'Connecting')\n\t\t\t}\n\t\t\tif (this.mode === 'manual' && this.useOauth) {\n\t\t\t\treturn this.account ? t('mail', 'Reconnect Google account') : t('mail', 'Sign in with Google')\n\t\t\t}\n\t\t\treturn this.account ? t('mail', 'Save') : t('mail', 'Connect')\n\t\t},\n\t},\n\tmethods: {\n\t\tonModeChanged(e) {\n\t\t\tthis.mode = e.tab.id\n\n\t\t\tif (this.mode === 'manual') {\n\t\t\t\t// IMAP\n\t\t\t\tif (this.manualConfig.imapUser === '') {\n\t\t\t\t\tthis.manualConfig.imapUser = this.emailAddress\n\t\t\t\t}\n\t\t\t\tif (this.manualConfig.imapPassword === '') {\n\t\t\t\t\tthis.manualConfig.imapPassword = this.autoConfig.password\n\t\t\t\t}\n\n\t\t\t\t// SMTP\n\t\t\t\tif (this.manualConfig.smtpUser === '') {\n\t\t\t\t\tthis.manualConfig.smtpUser = this.emailAddress\n\t\t\t\t}\n\t\t\t\tif (this.manualConfig.smtpPassword === '') {\n\t\t\t\t\tthis.manualConfig.smtpPassword = this.autoConfig.password\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonImapSslModeChange() {\n\t\t\tthis.clearFeedback()\n\n\t\t\tswitch (this.manualConfig.imapSslMode) {\n\t\t\tcase 'none':\n\t\t\tcase 'tls':\n\t\t\t\tthis.manualConfig.imapPort = 143\n\t\t\t\tbreak\n\t\t\tcase 'ssl':\n\t\t\t\tthis.manualConfig.imapPort = 993\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tonSmtpSslModeChange() {\n\t\t\tthis.clearFeedback()\n\n\t\t\tswitch (this.manualConfig.smtpSslMode) {\n\t\t\tcase 'none':\n\t\t\tcase 'tls':\n\t\t\t\tthis.manualConfig.smtpPort = 587\n\t\t\t\tbreak\n\t\t\tcase 'ssl':\n\t\t\t\tthis.manualConfig.smtpPort = 465\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tclearFeedback() {\n\t\t\tthis.feedback = null\n\t\t},\n\t\tapplyAutoConfig(config) {\n\t\t\tif (!config) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (config?.imapConfig) {\n\t\t\t\tthis.manualConfig.imapUser = config.imapConfig.username\n\t\t\t\tthis.manualConfig.imapHost = config.imapConfig.host\n\t\t\t\tthis.manualConfig.imapPort = config.imapConfig.port\n\t\t\t\tthis.manualConfig.imapSslMode = config.imapConfig.security\n\t\t\t\tthis.manualConfig.imapPassword = this.autoConfig.password\n\t\t\t}\n\t\t\tif (config?.smtpConfig) {\n\t\t\t\tthis.manualConfig.smtpUser = config.smtpConfig.username\n\t\t\t\tthis.manualConfig.smtpHost = config.smtpConfig.host\n\t\t\t\tthis.manualConfig.smtpPort = config.smtpConfig.port\n\t\t\t\tthis.manualConfig.smtpSslMode = config.smtpConfig.security\n\t\t\t\tthis.manualConfig.smtpPassword = this.autoConfig.password\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\t\tasync detectConfig() {\n\t\t\tthis.loadingMessage = t('mail', 'Looking up configuration')\n\t\t\tconst config = await queryIspdb(this.emailAddress)\n\t\t\tlogger.debug('fetched auto config', { config })\n\t\t\t// Apply settings to manual mode before submitting so the user\n\t\t\t// can make modifications if the config fails\n\t\t\tif (this.applyAutoConfig(config)) {\n\t\t\t\tlogger.debug('ISP DB config applied')\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\tthis.loadingMessage = t('mail', 'Checking mail host connectivity')\n\t\t\t\tconst mxHosts = await queryMx(this.emailAddress)\n\t\t\t\tlogger.debug('MX hosts fetched', { mxHosts })\n\t\t\t\tconst imapAndSmtpHosts = mxHosts.flatMap(host => {\n\t\t\t\t\treturn [993, 143, 465, 587].map(port => ({\n\t\t\t\t\t\thost,\n\t\t\t\t\t\tport,\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t\tconst results = await Promise.all(imapAndSmtpHosts.map(async ({ host, port }) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thost,\n\t\t\t\t\t\tport,\n\t\t\t\t\t\tcanConnect: await testConnectivity(host, port),\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t\tconst firstImapHost = results.filter(({ canConnect, port }) => canConnect && port === 993)[0]\n\t\t\t\tconst firstSmtpHost = results.filter(({ canConnect, port }) => canConnect && [465, 587].includes(port))[0]\n\t\t\t\tlogger.debug('MX connectivity tested', { firstImapHost, firstSmtpHost })\n\t\t\t\tif (firstImapHost && firstSmtpHost) {\n\t\t\t\t\tthis.applyAutoConfig({\n\t\t\t\t\t\timapConfig: {\n\t\t\t\t\t\t\tusername: this.emailAddress, // Assumption\n\t\t\t\t\t\t\thost: firstImapHost.host,\n\t\t\t\t\t\t\tport: firstImapHost.port,\n\t\t\t\t\t\t\tsecurity: firstImapHost.port === 993 ? 'ssl' : 'tls',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsmtpConfig: {\n\t\t\t\t\t\t\tusername: this.emailAddress, // Assumption\n\t\t\t\t\t\t\thost: firstSmtpHost.host,\n\t\t\t\t\t\t\tport: firstSmtpHost.port,\n\t\t\t\t\t\t\tsecurity: firstSmtpHost.port === 465 ? 'ssl' : 'tls',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\treturn true\n\t\t\t\t} else {\n\t\t\t\t\tthis.feedback = t('mail', 'Configuration discovery failed. Please use the manual settings')\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tasync onSubmit(event) {\n\t\t\tlogger.debug('account form submitted', { event })\n\t\t\tif (this.isDisabledManual || this.isDisabledAuto) {\n\t\t\t\tlogger.warn('submit is disabled')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.clearFeedback()\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tif (this.mode === 'auto') {\n\t\t\t\t\tif (!await this.detectConfig()) {\n\t\t\t\t\t\tlogger.warn('Auto mode failed')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!this.useOauth) {\n\t\t\t\t\tif (this.mode === 'auto' && this.autoConfig.password === '') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Password required')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (this.mode === 'manual' && (this.manualConfig.imapPassword === '' || this.manualConfig.smtpPassword === '')) {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Password required')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.loadingMessage = t('mail', 'Testing authentication')\n\t\t\t\tconst data = {\n\t\t\t\t\t...this.manualConfig,\n\t\t\t\t\taccountName: this.accountName,\n\t\t\t\t\temailAddress: this.emailAddress,\n\t\t\t\t\timapHost: this.manualConfig.imapHost.trim(),\n\t\t\t\t\tsmtpHost: this.manualConfig.smtpHost.trim(),\n\t\t\t\t\tauthMethod: this.useOauth ? 'xoauth2' : 'password',\n\t\t\t\t}\n\t\t\t\tif (this.useOauth) {\n\t\t\t\t\tdelete data.imapPassword\n\t\t\t\t\tdelete data.smtpPassword\n\t\t\t\t}\n\t\t\t\tif (!this.account) {\n\t\t\t\t\tconst account = await this.$store.dispatch('startAccountSetup', data)\n\t\t\t\t\tif (this.useOauth) {\n\t\t\t\t\t\tthis.loadingMessage = t('mail', 'Awaiting user consent')\n\t\t\t\t\t\tthis.feedback = t('mail', 'Account created. Please follow the pop-up instructions to link your Google account')\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (this.isGoogleAccount) {\n\t\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\t\tthis.googleOauthUrl\n\t\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Microsoft\n\t\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\t\tthis.microsoftOauthUrl\n\t\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Clean up the temporary account before we continue\n\t\t\t\t\t\t\tthis.$store.dispatch('deleteAccount', account)\n\t\t\t\t\t\t\tlogger.info(`Temporary account ${account.id} deleted`)\n\t\t\t\t\t\t\tthrow e\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.clearFeedback()\n\t\t\t\t\t}\n\t\t\t\t\tthis.loadingMessage = t('mail', 'Loading account')\n\t\t\t\t\tawait this.$store.dispatch('finishAccountSetup', { account })\n\t\t\t\t\tthis.$emit('account-created', account)\n\t\t\t\t} else {\n\t\t\t\t\tconst oldAccountData = this.account\n\t\t\t\t\tconst account = await this.$store.dispatch('updateAccount', {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t})\n\t\t\t\t\tif (this.useOauth) {\n\t\t\t\t\t\tthis.loadingMessage = t('mail', 'Awaiting user consent')\n\t\t\t\t\t\tthis.feedback = t('mail', 'Account updated. Please follow the pop-up instructions to reconnect your Google account')\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\tthis.googleOauthUrl\n\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Undo changes\n\t\t\t\t\t\t\tawait this.$store.dispatch('updateAccount', {\n\t\t\t\t\t\t\t\t...oldAccountData,\n\t\t\t\t\t\t\t\taccountId: oldAccountData.id,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tlogger.info(`Account ${account.id} update undone`)\n\t\t\t\t\t\t\tthrow e\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.clearFeedback()\n\t\t\t\t\t}\n\t\t\t\t\tthis.feedback = t('mail', 'Account updated')\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not save account details', { error })\n\n\t\t\t\tif (error.data?.error === 'CONNECTION_ERROR') {\n\t\t\t\t\tif (error.data.service === 'IMAP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'IMAP server is not reachable')\n\t\t\t\t\t} else if (error.data.service === 'SMTP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'SMTP server is not reachable')\n\t\t\t\t\t}\n\t\t\t\t} else if (error.data?.error === 'AUTHENTICATION') {\n\t\t\t\t\tif (error.data.service === 'IMAP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'IMAP username or password is wrong')\n\t\t\t\t\t} else if (error.data.service === 'SMTP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'SMTP username or password is wrong')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (error.data?.service === 'IMAP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'IMAP connection failed')\n\t\t\t\t\t} else if (error.data?.service === 'SMTP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'SMTP connection failed')\n\t\t\t\t\t} else if (error.message === CONSENT_ABORTED) {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Authorization pop-up closed')\n\t\t\t\t\t} else if (error.response?.status === 429) {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Configuration discovery temporarily not available. Please try again later.')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.feedback = t('mail', 'There was an error while setting up your account')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t\tthis.loadingMessage = undefined\n\t\t\t}\n\t\t},\n\t\tisValidEmail(email) {\n\t\t\tconst regExpEmail = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\treturn regExpEmail.test(email)\n\t\t},\n\t},\n}\n<\/script>\n\n<style lang=\"scss\" scoped>\n:deep(.tabs-component-tabs) {\n\tdisplay: flex;\n}\n\n:deep(.tabs-component-tab) {\n\tflex-grow: 1;\n\ttext-align: center;\n\tcolor: var(--color-text-lighter);\n\tmargin-bottom: 10px;\n}\n\n:deep(.tabs-component-tab.is-active) {\n\tborder-bottom: 1px solid black;\n\tfont-weight: bold;\n}\n\n.tabs-component-panels {\n\tpadding-top: 20px;\n}\n\n.tabs-component-panels label {\n\ttext-align: left;\n\twidth: 100%;\n\tdisplay: inline-block;\n}\n\n.tabs-component-panels input,\n.tabs-component-panels select {\n\tmargin-bottom: 10px;\n}\n</style>\n\n<style scoped>\nh4 {\n\ttext-align: left;\n}\n\n.flex-row {\n\tdisplay: flex;\n}\n\nlabel.button {\n\tdisplay: inline-block;\n\ttext-align: center;\n\tflex-grow: 1;\n}\nlabel.primary {\n\tcolor: var(--color-main-background);\n}\ninput.primary {\n\tcolor: var(--color-main-background);\n}\n\ninput[type='radio'] {\n\tdisplay: none;\n}\n\ninput[type='radio'][disabled] + label {\n\tcursor: default;\n\topacity: 0.5;\n}\n.account-form__label--required:after {\n\tcontent:\" *\";\n}\n.account-form__heading--required:after {\n\tcontent:\" *\";\n}\n.account-form__submit-buttons {\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin-top: 5px;\n}\n.account-form__submit-button {\n\tdisplay: flex;\n\talign-items: center;\n}\n.account-form--feedback {\n\tcolor: var(--color-text-maxcontrast);\n\tmargin-top: 5px;\n\ttext-align: center;\n}\n.account-form--error {\n\ttext-align: left;\n\tfont-size: 14px;\n}\n#account-form {\n\tz-index: 1001;\n\twidth: 250px;\n\ttop: 15%;\n\tpadding-bottom: 50px;\n\tmargin: 0 auto;\n\tpadding-top: 30px;\n}\n#account-form input {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n</style>\n"],sourceRoot:""}]),n.Z=i},68733:function(t,n,e){e.d(n,{Z:function(){return K}});var a=e(73909),o=e(20629),r=e(15961),i=e(58441),s=e(31352),l=e(89177),c=e(93664),u=e(79753);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(){d=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,a=Object.defineProperty||function(t,n,e){t[n]=e.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function c(t,n,e,o){var r=n&&n.prototype instanceof f?n:f,i=Object.create(r.prototype),s=new k(o||[]);return a(i,"_invoke",{value:_(t,e,s)}),i}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p={};function f(){}function h(){}function g(){}var v={};l(v,r,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(M([])));A&&A!==n&&e.call(A,r)&&(v=A);var y=g.prototype=f.prototype=Object.create(v);function C(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function w(t,n){function o(a,r,i,s){var l=u(t[a],t,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==m(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):n.resolve(d).then((function(t){c.value=t,i(c)}),(function(t){return o("throw",t,i,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,a){o(t,e,n,a)}))}return r=r?r.then(a,a):a()}})}function _(t,n,e){var a="suspendedStart";return function(o,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw r;return{value:void 0,done:!0}}for(e.method=o,e.arg=r;;){var i=e.delegate;if(i){var s=x(i,e);if(s){if(s===p)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===a)throw a="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);a="executing";var l=u(t,n,e);if("normal"===l.type){if(a=e.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:e.done}}"throw"===l.type&&(a="completed",e.method="throw",e.arg=l.arg)}}}function x(t,n){var e=n.method,a=t.iterator[e];if(void 0===a)return n.delegate=null,"throw"===e&&t.iterator.return&&(n.method="return",n.arg=void 0,x(t,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=u(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function P(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function S(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(t){if(t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(e.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=g,a(y,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===h||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},C(w.prototype),l(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(n,e,a,o,r){void 0===r&&(r=Promise);var i=new w(c(n,e,a,o),r);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(y),l(y,s,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=Object(t),e=[];for(var a in n)e.push(a);return e.reverse(),function t(){for(;e.length;){var a=e.pop();if(a in n)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=M,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(e,a){return i.type="throw",i.arg=t,n.next=e,a&&(n.method="next",n.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],i=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var s=e.call(r,"catchLoc"),l=e.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=n&&n<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=n,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),S(e),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var a=e.completion;if("throw"===a.type){var o=a.arg;S(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:M(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function p(t,n,e,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void e(t)}s.done?n(l):Promise.resolve(l).then(a,o)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){p(r,a,o,i,s,"next",t)}function s(t){p(r,a,o,i,s,"throw",t)}i(void 0)}))}}function h(t){return g.apply(this,arguments)}function g(){return(g=f(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.get((0,u.generateUrl)("/apps/mail/api/autoconfig/ispdb/{email}",{email:n}));case 2:return t.abrupt("return",t.sent.data.data);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return b.apply(this,arguments)}function b(){return(b=f(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.get((0,u.generateUrl)("/apps/mail/api/autoconfig/mx/{email}",{email:n}));case 2:return t.abrupt("return",t.sent.data.data);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t,n){return y.apply(this,arguments)}function y(){return(y=f(d().mark((function t(n,e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.get((0,u.generateUrl)("/apps/mail/api/autoconfig/test?host={host}&port={port}",{host:n,port:e}));case 2:return t.abrupt("return",t.sent.data.data);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function w(){w=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,a=Object.defineProperty||function(t,n,e){t[n]=e.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function c(t,n,e,o){var r=n&&n.prototype instanceof d?n:d,i=Object.create(r.prototype),s=new k(o||[]);return a(i,"_invoke",{value:_(t,e,s)}),i}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var m={};function d(){}function p(){}function f(){}var h={};l(h,r,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(M([])));v&&v!==n&&e.call(v,r)&&(h=v);var b=f.prototype=d.prototype=Object.create(h);function A(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){function o(a,r,i,s){var l=u(t[a],t,r);if("throw"!==l.type){var c=l.arg,m=c.value;return m&&"object"==C(m)&&e.call(m,"__await")?n.resolve(m.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):n.resolve(m).then((function(t){c.value=t,i(c)}),(function(t){return o("throw",t,i,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,a){o(t,e,n,a)}))}return r=r?r.then(a,a):a()}})}function _(t,n,e){var a="suspendedStart";return function(o,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw r;return{value:void 0,done:!0}}for(e.method=o,e.arg=r;;){var i=e.delegate;if(i){var s=x(i,e);if(s){if(s===m)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===a)throw a="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);a="executing";var l=u(t,n,e);if("normal"===l.type){if(a=e.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:e.done}}"throw"===l.type&&(a="completed",e.method="throw",e.arg=l.arg)}}}function x(t,n){var e=n.method,a=t.iterator[e];if(void 0===a)return n.delegate=null,"throw"===e&&t.iterator.return&&(n.method="return",n.arg=void 0,x(t,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),m;var o=u(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,m):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function S(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(t){if(t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(e.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=f,a(b,"constructor",{value:f,configurable:!0}),a(f,"constructor",{value:p,configurable:!0}),p.displayName=l(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},A(y.prototype),l(y.prototype,i,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,a,o,r){void 0===r&&(r=Promise);var i=new y(c(n,e,a,o),r);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(b),l(b,s,"Generator"),l(b,r,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=Object(t),e=[];for(var a in n)e.push(a);return e.reverse(),function t(){for(;e.length;){var a=e.pop();if(a in n)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=M,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(e,a){return i.type="throw",i.arg=t,n.next=e,a&&(n.method="next",n.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],i=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var s=e.call(r,"catchLoc"),l=e.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=n&&n<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=n,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),m},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),S(e),m}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var a=e.completion;if("throw"===a.type){var o=a.arg;S(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:M(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),m}},t}function _(t,n,e,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void e(t)}s.done?n(l):Promise.resolve(l).then(a,o)}var x="OAUTH_CONSENT_ABORTED";function P(t){return S.apply(this,arguments)}function S(){var t;return t=w().mark((function t(n){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=window.open(n,(0,s.Iu)("mail","Connect OAUTH2 account"),"toolbar=no, menubar=no, width=600, height=700")).focus(),t.next=4,new Promise((function(t,n){window.addEventListener("message",(function(n){var e=n.data;l.Z.debug("Child window message received",{event:n}),"DONE"===e&&(l.Z.info("OAUTH2 user consent given"),t())}));var a=setInterval((function(){e.closed&&(clearInterval(a),n(new Error(x)))}),200)}));case 4:case"end":return t.stop()}}),t)})),S=function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){_(r,a,o,i,s,"next",t)}function s(t){_(r,a,o,i,s,"throw",t)}i(void 0)}))},S.apply(this,arguments)}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function M(){M=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,a=Object.defineProperty||function(t,n,e){t[n]=e.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function c(t,n,e,o){var r=n&&n.prototype instanceof d?n:d,i=Object.create(r.prototype),s=new P(o||[]);return a(i,"_invoke",{value:C(t,e,s)}),i}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var m={};function d(){}function p(){}function f(){}var h={};l(h,r,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(S([])));v&&v!==n&&e.call(v,r)&&(h=v);var b=f.prototype=d.prototype=Object.create(h);function A(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){function o(a,r,i,s){var l=u(t[a],t,r);if("throw"!==l.type){var c=l.arg,m=c.value;return m&&"object"==k(m)&&e.call(m,"__await")?n.resolve(m.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):n.resolve(m).then((function(t){c.value=t,i(c)}),(function(t){return o("throw",t,i,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,a){o(t,e,n,a)}))}return r=r?r.then(a,a):a()}})}function C(t,n,e){var a="suspendedStart";return function(o,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw r;return{value:void 0,done:!0}}for(e.method=o,e.arg=r;;){var i=e.delegate;if(i){var s=w(i,e);if(s){if(s===m)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===a)throw a="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);a="executing";var l=u(t,n,e);if("normal"===l.type){if(a=e.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:e.done}}"throw"===l.type&&(a="completed",e.method="throw",e.arg=l.arg)}}}function w(t,n){var e=n.method,a=t.iterator[e];if(void 0===a)return n.delegate=null,"throw"===e&&t.iterator.return&&(n.method="return",n.arg=void 0,w(t,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),m;var o=u(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,m):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function _(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function x(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function S(t){if(t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(e.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=f,a(b,"constructor",{value:f,configurable:!0}),a(f,"constructor",{value:p,configurable:!0}),p.displayName=l(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},A(y.prototype),l(y.prototype,i,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,a,o,r){void 0===r&&(r=Promise);var i=new y(c(n,e,a,o),r);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(b),l(b,s,"Generator"),l(b,r,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=Object(t),e=[];for(var a in n)e.push(a);return e.reverse(),function t(){for(;e.length;){var a=e.pop();if(a in n)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(e,a){return i.type="throw",i.arg=t,n.next=e,a&&(n.method="next",n.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],i=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var s=e.call(r,"catchLoc"),l=e.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=n&&n<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=n,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),m},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),x(e),m}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var a=e.completion;if("throw"===a.type){var o=a.arg;x(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:S(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),m}},t}function O(t,n,e,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void e(t)}s.done?n(l):Promise.resolve(l).then(a,o)}function I(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){O(r,a,o,i,s,"next",t)}function s(t){O(r,a,o,i,s,"throw",t)}i(void 0)}))}}function T(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function E(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?T(Object(e),!0).forEach((function(n){L(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):T(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function L(t,n,e){return(n=function(t){var n=function(t,n){if("object"!==k(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var a=e.call(t,"string");if("object"!==k(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var N={name:"AccountForm",components:{Tab:a.Tab,Tabs:a.Tabs,ButtonVue:r.P2,IconLoading:r.lb,IconCheck:i.default},props:{displayName:{type:String,default:""},email:{type:String,default:""},account:{type:Object,required:!1,default:function(){}}},data:function(){var t=this,n=function(n,e){return void 0!==t.account?t.account[n]:e};return{loading:!1,loadingMessage:void 0,mode:"auto",accountName:this.displayName,emailAddress:this.email,autoConfig:{password:""},manualConfig:{imapHost:n("imapHost",""),imapPort:n("imapPort",993),imapSslMode:n("imapSslMode","ssl"),imapUser:n("imapUser",""),imapPassword:"",smtpHost:n("smtpHost",""),smtpPort:n("smtpPort",587),smtpSslMode:n("smtpSslMode","tls"),smtpUser:n("smtpUser",""),smtpPassword:""},feedback:null}},computed:E(E({},(0,o.Se)(["googleOauthUrl","microsoftOauthUrl"])),{},{settingsPage:function(){return void 0!==this.account},isDisabledAuto:function(){return!!this.loading||("auto"!==this.mode?this.loading:!this.emailAddress||!this.isValidEmail(this.emailAddress)||!this.googleOauthUrl&&!this.autoConfig.password)},isDisabledManual:function(){return!!this.loading||("manual"!==this.mode?this.loading:!(this.emailAddress&&this.isValidEmail(this.emailAddress)&&this.manualConfig.imapHost&&this.manualConfig.imapPort&&this.manualConfig.imapUser&&(this.useOauth||this.manualConfig.imapPassword)&&this.manualConfig.smtpHost&&this.manualConfig.smtpPort&&this.manualConfig.smtpUser&&(this.useOauth||this.manualConfig.smtpPassword)))},isGoogleAccount:function(){return"imap.gmail.com"===this.manualConfig.imapHost||"smtp.gmail.com"===this.manualConfig.smtpHost},isMicrosoftAccount:function(){return"outlook.office365.com"===this.manualConfig.imapHost||"outlook.office365.com"===this.manualConfig.smtpHost},hasPasswordAlternatives:function(){return!!this.googleOauthUrl||!!this.microsoftOauthUrl},useOauth:function(){return this.isGoogleAccount&&this.googleOauthUrl||this.isMicrosoftAccount&&this.microsoftOauthUrl},submitButtonText:function(){var t;return this.loading?null!==(t=this.loadingMessage)&&void 0!==t?t:(0,s.Iu)("mail","Connecting"):"manual"===this.mode&&this.useOauth?this.account?(0,s.Iu)("mail","Reconnect Google account"):(0,s.Iu)("mail","Sign in with Google"):this.account?(0,s.Iu)("mail","Save"):(0,s.Iu)("mail","Connect")}}),methods:{onModeChanged:function(t){this.mode=t.tab.id,"manual"===this.mode&&(""===this.manualConfig.imapUser&&(this.manualConfig.imapUser=this.emailAddress),""===this.manualConfig.imapPassword&&(this.manualConfig.imapPassword=this.autoConfig.password),""===this.manualConfig.smtpUser&&(this.manualConfig.smtpUser=this.emailAddress),""===this.manualConfig.smtpPassword&&(this.manualConfig.smtpPassword=this.autoConfig.password))},onImapSslModeChange:function(){switch(this.clearFeedback(),this.manualConfig.imapSslMode){case"none":case"tls":this.manualConfig.imapPort=143;break;case"ssl":this.manualConfig.imapPort=993}},onSmtpSslModeChange:function(){switch(this.clearFeedback(),this.manualConfig.smtpSslMode){case"none":case"tls":this.manualConfig.smtpPort=587;break;case"ssl":this.manualConfig.smtpPort=465}},clearFeedback:function(){this.feedback=null},applyAutoConfig:function(t){return!!t&&(null!=t&&t.imapConfig&&(this.manualConfig.imapUser=t.imapConfig.username,this.manualConfig.imapHost=t.imapConfig.host,this.manualConfig.imapPort=t.imapConfig.port,this.manualConfig.imapSslMode=t.imapConfig.security,this.manualConfig.imapPassword=this.autoConfig.password),null!=t&&t.smtpConfig&&(this.manualConfig.smtpUser=t.smtpConfig.username,this.manualConfig.smtpHost=t.smtpConfig.host,this.manualConfig.smtpPort=t.smtpConfig.port,this.manualConfig.smtpSslMode=t.smtpConfig.security,this.manualConfig.smtpPassword=this.autoConfig.password),!0)},detectConfig:function(){var t=this;return I(M().mark((function n(){var e,a,o,r,i,c;return M().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadingMessage=(0,s.Iu)("mail","Looking up configuration"),n.next=3,h(t.emailAddress);case 3:if(e=n.sent,l.Z.debug("fetched auto config",{config:e}),!t.applyAutoConfig(e)){n.next=10;break}return l.Z.debug("ISP DB config applied"),n.abrupt("return",!0);case 10:return t.loadingMessage=(0,s.Iu)("mail","Checking mail host connectivity"),n.next=13,v(t.emailAddress);case 13:return a=n.sent,l.Z.debug("MX hosts fetched",{mxHosts:a}),o=a.flatMap((function(t){return[993,143,465,587].map((function(n){return{host:t,port:n}}))})),n.next=18,Promise.all(o.map(function(){var t=I(M().mark((function t(n){var e,a;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.host,a=n.port,t.t0=e,t.t1=a,t.next=5,A(e,a);case 5:return t.t2=t.sent,t.abrupt("return",{host:t.t0,port:t.t1,canConnect:t.t2});case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 18:if(r=n.sent,i=r.filter((function(t){var n=t.canConnect,e=t.port;return n&&993===e}))[0],c=r.filter((function(t){var n=t.canConnect,e=t.port;return n&&[465,587].includes(e)}))[0],l.Z.debug("MX connectivity tested",{firstImapHost:i,firstSmtpHost:c}),!i||!c){n.next=27;break}return t.applyAutoConfig({imapConfig:{username:t.emailAddress,host:i.host,port:i.port,security:993===i.port?"ssl":"tls"},smtpConfig:{username:t.emailAddress,host:c.host,port:c.port,security:465===c.port?"ssl":"tls"}}),n.abrupt("return",!0);case 27:t.feedback=(0,s.Iu)("mail","Configuration discovery failed. Please use the manual settings");case 28:return n.abrupt("return",!1);case 29:case"end":return n.stop()}}),n)})))()},onSubmit:function(t){var n=this;return I(M().mark((function e(){var a,o,r,i,c,u,m,d,p;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.Z.debug("account form submitted",{event:t}),!n.isDisabledManual&&!n.isDisabledAuto){e.next=4;break}return l.Z.warn("submit is disabled"),e.abrupt("return");case 4:if(n.clearFeedback(),n.loading=!0,e.prev=6,"auto"!==n.mode){e.next=13;break}return e.next=10,n.detectConfig();case 10:if(e.sent){e.next=13;break}return l.Z.warn("Auto mode failed"),e.abrupt("return");case 13:if(n.useOauth){e.next=20;break}if("auto"!==n.mode||""!==n.autoConfig.password){e.next=17;break}return n.feedback=(0,s.Iu)("mail","Password required"),e.abrupt("return");case 17:if("manual"!==n.mode||""!==n.manualConfig.imapPassword&&""!==n.manualConfig.smtpPassword){e.next=20;break}return n.feedback=(0,s.Iu)("mail","Password required"),e.abrupt("return");case 20:if(n.loadingMessage=(0,s.Iu)("mail","Testing authentication"),a=E(E({},n.manualConfig),{},{accountName:n.accountName,emailAddress:n.emailAddress,imapHost:n.manualConfig.imapHost.trim(),smtpHost:n.manualConfig.smtpHost.trim(),authMethod:n.useOauth?"xoauth2":"password"}),n.useOauth&&(delete a.imapPassword,delete a.smtpPassword),n.account){e.next=52;break}return e.next=26,n.$store.dispatch("startAccountSetup",a);case 26:if(o=e.sent,!n.useOauth){e.next=46;break}if(n.loadingMessage=(0,s.Iu)("mail","Awaiting user consent"),n.feedback=(0,s.Iu)("mail","Account created. Please follow the pop-up instructions to link your Google account"),e.prev=30,!n.isGoogleAccount){e.next=36;break}return e.next=34,P(n.googleOauthUrl.replace("_accountId_",o.id).replace("_email_",encodeURIComponent(o.emailAddress)));case 34:e.next=38;break;case 36:return e.next=38,P(n.microsoftOauthUrl.replace("_accountId_",o.id).replace("_email_",encodeURIComponent(o.emailAddress)));case 38:e.next=45;break;case 40:throw e.prev=40,e.t0=e.catch(30),n.$store.dispatch("deleteAccount",o),l.Z.info("Temporary account ".concat(o.id," deleted")),e.t0;case 45:n.clearFeedback();case 46:return n.loadingMessage=(0,s.Iu)("mail","Loading account"),e.next=49,n.$store.dispatch("finishAccountSetup",{account:o});case 49:n.$emit("account-created",o),e.next=72;break;case 52:return r=n.account,e.next=55,n.$store.dispatch("updateAccount",E(E({},a),{},{accountId:n.account.id}));case 55:if(i=e.sent,!n.useOauth){e.next=71;break}return n.loadingMessage=(0,s.Iu)("mail","Awaiting user consent"),n.feedback=(0,s.Iu)("mail","Account updated. Please follow the pop-up instructions to reconnect your Google account"),e.prev=59,e.next=62,P(n.googleOauthUrl.replace("_accountId_",i.id).replace("_email_",encodeURIComponent(i.emailAddress)));case 62:e.next=70;break;case 64:return e.prev=64,e.t1=e.catch(59),e.next=68,n.$store.dispatch("updateAccount",E(E({},r),{},{accountId:r.id}));case 68:throw l.Z.info("Account ".concat(i.id," update undone")),e.t1;case 70:n.clearFeedback();case 71:n.feedback=(0,s.Iu)("mail","Account updated");case 72:e.next=78;break;case 74:e.prev=74,e.t2=e.catch(6),l.Z.error("could not save account details",{error:e.t2}),"CONNECTION_ERROR"===(null===(c=e.t2.data)||void 0===c?void 0:c.error)?"IMAP"===e.t2.data.service?n.feedback=(0,s.Iu)("mail","IMAP server is not reachable"):"SMTP"===e.t2.data.service&&(n.feedback=(0,s.Iu)("mail","SMTP server is not reachable")):"AUTHENTICATION"===(null===(u=e.t2.data)||void 0===u?void 0:u.error)?"IMAP"===e.t2.data.service?n.feedback=(0,s.Iu)("mail","IMAP username or password is wrong"):"SMTP"===e.t2.data.service&&(n.feedback=(0,s.Iu)("mail","SMTP username or password is wrong")):"IMAP"===(null===(m=e.t2.data)||void 0===m?void 0:m.service)?n.feedback=(0,s.Iu)("mail","IMAP connection failed"):"SMTP"===(null===(d=e.t2.data)||void 0===d?void 0:d.service)?n.feedback=(0,s.Iu)("mail","SMTP connection failed"):e.t2.message===x?n.feedback=(0,s.Iu)("mail","Authorization pop-up closed"):429===(null===(p=e.t2.response)||void 0===p?void 0:p.status)?n.feedback=(0,s.Iu)("mail","Configuration discovery temporarily not available. Please try again later."):n.feedback=(0,s.Iu)("mail","There was an error while setting up your account");case 78:return e.prev=78,n.loading=!1,n.loadingMessage=void 0,e.finish(78);case 82:case"end":return e.stop()}}),e,null,[[6,74,78,82],[30,40],[59,64]])})))()},isValidEmail:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}}},U=N,H=e(93379),q=e.n(H),F=e(7795),j=e.n(F),G=e(90569),B=e.n(G),D=e(3565),Z=e.n(D),$=e(19216),z=e.n($),R=e(44589),V=e.n(R),Y=e(75596),X={};X.styleTagTransform=V(),X.setAttributes=Z(),X.insert=B().bind(null,"head"),X.domAPI=j(),X.insertStyleElement=z(),q()(Y.Z,X),Y.Z&&Y.Z.locals&&Y.Z.locals;var W=e(39627),Q={};Q.styleTagTransform=V(),Q.setAttributes=Z(),Q.insert=B().bind(null,"head"),Q.domAPI=j(),Q.insertStyleElement=z(),q()(W.Z,Q),W.Z&&W.Z.locals&&W.Z.locals;var J=(0,e(51900).Z)(U,(function(){var t=this,n=t._self._c;return n("form",{attrs:{id:"account-form"},on:{submit:function(n){return n.preventDefault(),t.onSubmit.apply(null,arguments)}}},[n("Tabs",{attrs:{options:{useUrlFragment:!1,defaultTabHash:t.settingsPage?"manual":"auto"},"cache-lifetime":"0"},on:{changed:t.onModeChanged}},[n("Tab",{key:"auto",attrs:{id:"auto",name:t.t("mail","Auto")}},[n("label",{attrs:{for:"auto-name"}},[t._v(t._s(t.t("mail","Name")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountName,expression:"accountName"}],attrs:{id:"auto-name",type:"text",placeholder:t.t("mail","Name"),disabled:t.loading,autofocus:""},domProps:{value:t.accountName},on:{input:function(n){n.target.composing||(t.accountName=n.target.value)}}}),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"auto-address"}},[t._v(t._s(t.t("mail","Mail address")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.emailAddress,expression:"emailAddress",modifiers:{lazy:!0}}],attrs:{id:"auto-address",disabled:t.loading,placeholder:t.t("mail","name@example.org"),required:"",type:"email"},domProps:{value:t.emailAddress},on:{blur:function(n){return t.isValidEmail(t.emailAddress)},change:[function(n){t.emailAddress=n.target.value},t.clearFeedback]}}),t._v(" "),t.isValidEmail(t.emailAddress)?t._e():n("p",{staticClass:"account-form--error"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Please enter an email of the format name@example.com"))+"\n\t\t\t")]),t._v(" "),n("label",{class:{"account-form__label":t.hasPasswordAlternatives,"account-form__label--required":!t.hasPasswordAlternatives},attrs:{for:"auto-password"}},[t._v(t._s(t.t("mail","Password")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.autoConfig.password,expression:"autoConfig.password"}],attrs:{id:"auto-password",disabled:t.loading,placeholder:t.t("mail","Password"),required:!t.hasPasswordAlternatives,type:"password"},domProps:{value:t.autoConfig.password},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.autoConfig,"password",n.target.value)}}})]),t._v(" "),n("Tab",{key:"manual",attrs:{id:"manual",name:t.t("mail","Manual")}},[n("label",{attrs:{for:"man-name"}},[t._v(t._s(t.t("mail","Name")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountName,expression:"accountName"}],attrs:{id:"man-name",type:"text",placeholder:t.t("mail","Name"),disabled:t.loading},domProps:{value:t.accountName},on:{input:function(n){n.target.composing||(t.accountName=n.target.value)}}}),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-address"}},[t._v(t._s(t.t("mail","Mail address")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.emailAddress,expression:"emailAddress",modifiers:{lazy:!0}}],attrs:{id:"man-address",type:"email",placeholder:t.t("mail","name@example.org"),disabled:t.loading,required:""},domProps:{value:t.emailAddress},on:{blur:function(n){return t.isValidEmail(t.emailAddress)},change:[function(n){t.emailAddress=n.target.value},t.clearFeedback]}}),t._v(" "),t.isValidEmail(t.emailAddress)?t._e():n("p",{staticClass:"account-form--error"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Please enter an email of the format name@example.com"))+"\n\t\t\t")]),t._v(" "),n("h3",[t._v(t._s(t.t("mail","IMAP Settings")))]),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-imap-host"}},[t._v(t._s(t.t("mail","IMAP Host")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapHost,expression:"manualConfig.imapHost"}],attrs:{id:"man-imap-host",type:"text",placeholder:t.t("mail","IMAP Host"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.imapHost},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"imapHost",n.target.value)}}}),t._v(" "),n("h4",{staticClass:"account-form__heading--required"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","IMAP Security"))+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"flex-row"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapSslMode,expression:"manualConfig.imapSslMode"}],attrs:{id:"man-imap-sec-none",type:"radio",name:"man-imap-sec",disabled:t.loading,value:"none"},domProps:{checked:t._q(t.manualConfig.imapSslMode,"none")},on:{change:[function(n){return t.$set(t.manualConfig,"imapSslMode","none")},t.onImapSslModeChange]}}),t._v(" "),n("label",{staticClass:"button",class:{primary:"none"===t.manualConfig.imapSslMode},attrs:{for:"man-imap-sec-none"}},[t._v(t._s(t.t("mail","None")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapSslMode,expression:"manualConfig.imapSslMode"}],attrs:{id:"man-imap-sec-ssl",type:"radio",name:"man-imap-sec",disabled:t.loading,value:"ssl"},domProps:{checked:t._q(t.manualConfig.imapSslMode,"ssl")},on:{change:[function(n){return t.$set(t.manualConfig,"imapSslMode","ssl")},t.onImapSslModeChange]}}),t._v(" "),n("label",{staticClass:"button",class:{primary:"ssl"===t.manualConfig.imapSslMode},attrs:{for:"man-imap-sec-ssl"}},[t._v(t._s(t.t("mail","SSL/TLS")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapSslMode,expression:"manualConfig.imapSslMode"}],attrs:{id:"man-imap-sec-tls",type:"radio",name:"man-imap-sec",disabled:t.loading,value:"tls"},domProps:{checked:t._q(t.manualConfig.imapSslMode,"tls")},on:{change:[function(n){return t.$set(t.manualConfig,"imapSslMode","tls")},t.onImapSslModeChange]}}),t._v(" "),n("label",{staticClass:"button",class:{primary:"tls"===t.manualConfig.imapSslMode},attrs:{for:"man-imap-sec-tls"}},[t._v(t._s(t.t("mail","STARTTLS")))])]),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-imap-port"}},[t._v(t._s(t.t("mail","IMAP Port")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapPort,expression:"manualConfig.imapPort"}],attrs:{id:"man-imap-port",type:"number",placeholder:t.t("mail","IMAP Port"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.imapPort},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"imapPort",n.target.value)}}}),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-imap-user"}},[t._v(t._s(t.t("mail","IMAP User")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapUser,expression:"manualConfig.imapUser"}],attrs:{id:"man-imap-user",type:"text",placeholder:t.t("mail","IMAP User"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.imapUser},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"imapUser",n.target.value)}}}),t._v(" "),t.useOauth?t._e():n("label",{staticClass:"account-form__label--required",attrs:{for:"man-imap-password"}},[t._v(t._s(t.t("mail","IMAP Password")))]),t._v(" "),t.useOauth?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.imapPassword,expression:"manualConfig.imapPassword"}],attrs:{id:"man-imap-password",type:"password",placeholder:t.t("mail","IMAP Password"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.imapPassword},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"imapPassword",n.target.value)}}}),t._v(" "),n("h3",[t._v(t._s(t.t("mail","SMTP Settings")))]),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-smtp-host"}},[t._v(t._s(t.t("mail","SMTP Host")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpHost,expression:"manualConfig.smtpHost"}],ref:"smtpHost",attrs:{id:"man-smtp-host",type:"text",name:"smtp-host",placeholder:t.t("mail","SMTP Host"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.smtpHost},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"smtpHost",n.target.value)}}}),t._v(" "),n("h4",{staticClass:"account-form__heading--required"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","SMTP Security"))+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"flex-row"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpSslMode,expression:"manualConfig.smtpSslMode"}],attrs:{id:"man-smtp-sec-none",type:"radio",name:"man-smtp-sec",disabled:t.loading,value:"none"},domProps:{checked:t._q(t.manualConfig.smtpSslMode,"none")},on:{change:[function(n){return t.$set(t.manualConfig,"smtpSslMode","none")},t.onSmtpSslModeChange]}}),t._v(" "),n("label",{staticClass:"button",class:{primary:"none"===t.manualConfig.smtpSslMode},attrs:{for:"man-smtp-sec-none"}},[t._v(t._s(t.t("mail","None")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpSslMode,expression:"manualConfig.smtpSslMode"}],attrs:{id:"man-smtp-sec-ssl",type:"radio",name:"man-smtp-sec",disabled:t.loading,value:"ssl"},domProps:{checked:t._q(t.manualConfig.smtpSslMode,"ssl")},on:{change:[function(n){return t.$set(t.manualConfig,"smtpSslMode","ssl")},t.onSmtpSslModeChange]}}),t._v(" "),n("label",{staticClass:"button",class:{primary:"ssl"===t.manualConfig.smtpSslMode},attrs:{for:"man-smtp-sec-ssl"}},[t._v(t._s(t.t("mail","SSL/TLS")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpSslMode,expression:"manualConfig.smtpSslMode"}],attrs:{id:"man-smtp-sec-tls",type:"radio",name:"man-smtp-sec",disabled:t.loading,value:"tls"},domProps:{checked:t._q(t.manualConfig.smtpSslMode,"tls")},on:{change:[function(n){return t.$set(t.manualConfig,"smtpSslMode","tls")},t.onSmtpSslModeChange]}}),t._v(" "),n("label",{staticClass:"button",class:{primary:"tls"===t.manualConfig.smtpSslMode},attrs:{for:"man-smtp-sec-tls"}},[t._v(t._s(t.t("mail","STARTTLS")))])]),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-smtp-port"}},[t._v(t._s(t.t("mail","SMTP Port")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpPort,expression:"manualConfig.smtpPort"}],attrs:{id:"man-smtp-port",type:"number",placeholder:t.t("mail","SMTP Port"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.smtpPort},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"smtpPort",n.target.value)}}}),t._v(" "),n("label",{staticClass:"account-form__label--required",attrs:{for:"man-smtp-user"}},[t._v(t._s(t.t("mail","SMTP User")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpUser,expression:"manualConfig.smtpUser"}],attrs:{id:"man-smtp-user",type:"text",placeholder:t.t("mail","SMTP User"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.smtpUser},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"smtpUser",n.target.value)}}}),t._v(" "),t.useOauth?t._e():n("label",{staticClass:"account-form__label--required",attrs:{for:"man-smtp-password"}},[t._v(t._s(t.t("mail","SMTP Password")))]),t._v(" "),t.useOauth?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.manualConfig.smtpPassword,expression:"manualConfig.smtpPassword"}],attrs:{id:"man-smtp-password",type:"password",placeholder:t.t("mail","SMTP Password"),disabled:t.loading,required:""},domProps:{value:t.manualConfig.smtpPassword},on:{change:t.clearFeedback,input:function(n){n.target.composing||t.$set(t.manualConfig,"smtpPassword",n.target.value)}}})])],1),t._v(" "),t.isGoogleAccount&&!t.googleOauthUrl?n("div",{staticClass:"account-form__google-sso"},[t._v("\n\t\t"+t._s(t.t("mail","For the Google account to work with this app you need to enable two-factor authentication for Google and generate an app password."))+"\n\t")]):t._e(),t._v(" "),n("div",{staticClass:"account-form__submit-buttons"},["auto"===t.mode?n("ButtonVue",{staticClass:"account-form__submit-button",attrs:{"aria-label":t.submitButtonText,type:"primary","native-type":"submit",disabled:t.isDisabledAuto||t.loading},on:{click:function(n){return n.preventDefault(),t.onSubmit.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?n("IconLoading",{attrs:{size:20}}):n("IconCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,4145190044)},[t._v("\n\t\t\t"+t._s(t.submitButtonText)+"\n\t\t")]):"manual"===t.mode?n("ButtonVue",{staticClass:"account-form__submit-button",attrs:{"aria-label":t.submitButtonText,type:"primary","native-type":"submit",disabled:t.isDisabledManual||t.loading},on:{click:function(n){return n.preventDefault(),t.onSubmit.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?n("IconLoading",{attrs:{size:20}}):n("IconCheck",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.submitButtonText)+"\n\t\t")]):t._e()],1),t._v(" "),t.feedback?n("div",{staticClass:"account-form--feedback"},[t._v("\n\t\t"+t._s(t.feedback)+"\n\t")]):t._e()],1)}),[],!1,null,"622bb4c1",null),K=J.exports}}]);
//# sourceMappingURL=mail.733.81d98d125725f33b31b9.js.map
/*! For license information please see mail.267.194829a7be03f1584184.js.LICENSE.txt */
(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[267],{90162:function(t,e,n){"use strict";var r=new(n(20144).ZP);e.Z=r},72488:function(t,e,n){"use strict";n.d(e,{I:function(){return o}});var r=n(31352),o=function(t){if(t.specialUse.length>0)try{return function(t){if(t.specialUse.includes("all"))return(0,r.Iu)("mail","All");if(t.specialUse.includes("archive"))return(0,r.Iu)("mail","Archive");if(t.specialUse.includes("drafts"))return(0,r.Iu)("mail","Drafts");if(t.specialUse.includes("flagged"))return(0,r.Iu)("mail","Favorites");if(t.specialUse.includes("inbox"))return t.isPriorityInbox?(0,r.Iu)("mail","Priority inbox"):t.isUnified?(0,r.Iu)("mail","All inboxes"):(0,r.Iu)("mail","Inbox");if(t.specialUse.includes("junk"))return(0,r.Iu)("mail","Junk");if(t.specialUse.includes("sent"))return(0,r.Iu)("mail","Sent");if(t.specialUse.includes("trash"))return(0,r.Iu)("mail","Trash");throw new Error("unknown special use ".concat(t.specialUse))}(t)}catch(t){console.error("could not translate special mailbox",t)}return t.displayName}},47360:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!t.myAcls)return!0;for(var n=r(t.myAcls),o=0,i=r(e);o<i.length;o++){var a=i[o];if(!n.includes(a))return!1}return!0}n.d(e,{Y:function(){return i}})},99623:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,"p.app-settings span.loading-icon[data-v-04061aaf]{display:inline-block;vertical-align:middle;padding:5px 0}p.app-settings[data-v-04061aaf]{padding:10px 0}.app-settings-button[data-v-04061aaf]{display:inline-flex;background-position:10px center;text-align:left;margin-top:6px;width:100%}.app-settings-button.button.primary.new-button[data-v-04061aaf]{color:var(--color-primary-element-text);padding-left:34px;gap:4px;width:fit-content}.app-settings-link[data-v-04061aaf]{text-decoration:underline}[data-v-04061aaf] .button-vue__text{text-overflow:clip;white-space:normal}[data-v-04061aaf] .button-vue__wrapper{justify-content:flex-start}.mailvelope-section[data-v-04061aaf]{padding-top:15px}.mailvelope-section a.button[data-v-04061aaf]{display:flex;align-items:center;line-height:normal;min-height:44px;font-size:unset}.mailvelope-section a.button[data-v-04061aaf]:focus-visible,.mailvelope-section a.button[data-v-04061aaf]:hover{box-shadow:0 0 0 1px var(--color-primary-element)}","",{version:3,sources:["webpack://./src/components/AppSettingsMenu.vue"],names:[],mappings:"AACA,kDACC,oBAAA,CACA,qBAAA,CACA,aAAA,CAED,gCACC,cAAA,CAED,sCACC,mBAAA,CACA,+BAAA,CACA,eAAA,CACA,cAAA,CACA,UAAA,CAED,gEACC,uCAAA,CAEA,iBAAA,CACA,OAAA,CACA,iBAAA,CAED,oCACC,yBAAA,CAED,oCACC,kBAAA,CACA,kBAAA,CAED,uCACC,0BAAA,CAED,qCACC,gBAAA,CAEA,8CACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CAEA,gHAEC,iDAAA",sourcesContent:["\np.app-settings span.loading-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 5px 0;\n}\np.app-settings {\n\tpadding: 10px 0;\n}\n.app-settings-button {\n\tdisplay: inline-flex;\n\tbackground-position: 10px center;\n\ttext-align: left;\n\tmargin-top: 6px;\n\twidth: 100%;\n}\n.app-settings-button.button.primary.new-button {\n\tcolor: var(--color-primary-element-text);\n\t//this style will be removed after we migrate also the  'add mail account' to material design\n\tpadding-left: 34px;\n\tgap: 4px;\n\twidth: fit-content;\n}\n.app-settings-link {\n\ttext-decoration: underline;\n}\n::v-deep .button-vue__text {\n\ttext-overflow: clip;\n\twhite-space: normal;\n}\n::v-deep .button-vue__wrapper {\n\tjustify-content: flex-start;\n}\n.mailvelope-section {\n\tpadding-top: 15px;\n\n\ta.button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tline-height: normal;\n\t\tmin-height: 44px;\n\t\tfont-size: unset;\n\n\t\t&:focus-visible,\n\t\t&:hover {\n\t\t\tbox-shadow: 0 0 0 1px var(--color-primary-element);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),e.Z=a},19093:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,"[data-v-06e0ced4] .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:600px !important;max-height:500px !important}.modal-content[data-v-06e0ced4]{display:flex;box-sizing:border-box;width:100%;height:100%;flex-direction:column;padding:15px}.crumbs[data-v-06e0ced4]{display:inline-flex;padding-right:0px;flex-wrap:wrap}.crumbs .level[data-v-06e0ced4]{display:inline-flex;height:44px;min-width:0px;flex:0 0 auto;order:1;padding-right:7px;background-position:right center;background-size:auto 24px;margin-top:-10px}.crumbs a[data-v-06e0ced4]{position:relative;padding:12px;opacity:.5;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:0 0 auto;min-width:0px;max-width:200px}.crumbs a[data-v-06e0ced4]:hover{opacity:.7}.crumbs a.icon-home[data-v-06e0ced4]{width:0px;background-position:left center}.mailbox-list[data-v-06e0ced4]{display:inline-block;width:100%;height:100%;overflow-y:auto;flex:1}.mailbox-list li[data-v-06e0ced4]{display:flex;cursor:pointer}.mailbox-list li[data-v-06e0ced4]:hover{background-color:var(--color-background-hover)}.mailbox-list li[data-v-06e0ced4]:not(:last-child){border-bottom:1px solid var(--color-border)}.mailbox-list h2[data-v-06e0ced4]{width:100%;color:var(--color-text-maxcontrast);text-align:center;margin-top:80px;opacity:.4;background-size:64px;height:64px}.mailbox-list .mailbox-icon[data-v-06e0ced4]{width:24px;height:24px;padding:14px;opacity:.9;background-size:24px}.mailbox-list .mailbox-title[data-v-06e0ced4]{padding:14px 14px 14px 0;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.buttons[data-v-06e0ced4]{display:flex;justify-content:flex-end;padding-top:10px}.buttons .spinner[data-v-06e0ced4]{margin-right:5px}.material-design-icon[data-v-06e0ced4]{opacity:.7;margin-right:6px}","",{version:3,sources:["webpack://./src/components/MailboxPicker.vue"],names:[],mappings:"AACA,mCACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAGD,gCACC,YAAA,CACA,qBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,YAAA,CAGD,yBACC,mBAAA,CACA,iBAAA,CACA,cAAA,CAEA,gCACC,mBAAA,CACA,WAAA,CACA,aAAA,CACA,aAAA,CACA,OAAA,CACA,iBAAA,CACA,gCAAA,CACA,yBAAA,CACA,gBAAA,CAGD,2BACC,iBAAA,CACA,YAAA,CACA,UAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,aAAA,CACA,aAAA,CACA,eAAA,CAEA,iCACC,UAAA,CAIF,qCACC,SAAA,CACA,+BAAA,CAIF,+BACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,MAAA,CAEA,kCACC,YAAA,CACA,cAAA,CAEA,wCACC,8CAAA,CAGD,mDACC,2CAAA,CAIF,kCACC,UAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,oBAAA,CACA,WAAA,CAGD,6CACC,UAAA,CACA,WAAA,CACA,YAAA,CACA,UAAA,CACA,oBAAA,CAGD,8CACC,wBAAA,CACA,MAAA,CACA,eAAA,CACA,kBAAA,CACA,sBAAA,CAIF,0BACC,YAAA,CACA,wBAAA,CACA,gBAAA,CAEA,mCACC,gBAAA,CAGF,uCACC,UAAA,CACA,gBAAA",sourcesContent:["\n:deep(.modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 600px !important;\n\tmax-height: 500px !important;\n}\n\n.modal-content {\n\tdisplay: flex;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\tflex-direction: column;\n\tpadding: 15px;\n}\n\n.crumbs {\n\tdisplay: inline-flex;\n\tpadding-right: 0px;\n\tflex-wrap: wrap;\n\n\t.level {\n\t\tdisplay: inline-flex;\n\t\theight: 44px;\n\t\tmin-width: 0px;\n\t\tflex: 0 0 auto;\n\t\torder: 1;\n\t\tpadding-right: 7px;\n\t\tbackground-position: right center;\n\t\tbackground-size: auto 24px;\n\t\tmargin-top: -10px;\n\t}\n\n\ta {\n\t\tposition: relative;\n\t\tpadding: 12px;\n\t\topacity: 0.5;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\tflex: 0 0 auto;\n\t\tmin-width: 0px;\n\t\tmax-width: 200px;\n\n\t\t&:hover {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\n\ta.icon-home {\n\t\twidth: 0px;\n\t\tbackground-position: left center;\n\t}\n}\n\n.mailbox-list {\n\tdisplay: inline-block;\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: auto;\n\tflex: 1;\n\n\tli {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\n\t\t&:not(:last-child) {\n\t\t\tborder-bottom: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\th2 {\n\t\twidth: 100%;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tmargin-top: 80px;\n\t\topacity: 0.4;\n\t\tbackground-size: 64px;\n\t\theight: 64px;\n\t}\n\n\t.mailbox-icon {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tpadding: 14px;\n\t\topacity: 0.9;\n\t\tbackground-size: 24px;\n\t}\n\n\t.mailbox-title {\n\t\tpadding: 14px 14px 14px 0;\n\t\tflex: 1;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n.buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding-top: 10px;\n\n\t.spinner {\n\t\tmargin-right: 5px;\n\t}\n}\n.material-design-icon {\n\topacity: .7;\n\tmargin-right: 6px;\n}\n"],sourceRoot:""}]),e.Z=a},81895:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,".button[data-v-bb0d4a8a]{width:44px;height:44px;background-color:var(--color-main-background);border:none;display:inline-block;position:absolute;margin-left:254px;margin-top:13px;opacity:.7}.button[data-v-bb0d4a8a]:hover,.button[data-v-bb0d4a8a]:focus{opacity:1;background-color:var(--color-background-hover)}.button[data-v-bb0d4a8a]:disabled{cursor:not-allowed;opacity:.5;animation:rotation-bb0d4a8a 2s linear}[data-v-bb0d4a8a] .app-navigation-new button{width:240px !important;height:44px}@keyframes rotation-bb0d4a8a{from{transform:rotate(0deg)}to{transform:rotate(-360deg)}}.app-navigation-spacer[data-v-bb0d4a8a]{order:0 !important}[data-v-bb0d4a8a] .settings-button{font-weight:bold !important;z-index:1}.outbox[data-v-bb0d4a8a]{margin-left:6px;width:auto}.outbox__border[data-v-bb0d4a8a]{border-top:1px solid var(--color-background-darker)}.outbox[data-v-bb0d4a8a] .app-navigation-entry.active{background-color:rgba(0,0,0,0) !important}","",{version:3,sources:["webpack://./src/components/Navigation.vue"],names:[],mappings:"AACA,yBACC,UAAA,CACA,WAAA,CACA,6CAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,8DAEC,SAAA,CACA,8CAAA,CAED,kCACC,kBAAA,CACA,UAAA,CACA,qCAAA,CAGF,6CACC,sBAAA,CACA,WAAA,CAED,6BACA,KACC,sBAAA,CAED,GACE,yBAAA,CAAA,CAGF,wCACC,kBAAA,CAED,mCACC,2BAAA,CACA,SAAA,CAED,yBACC,eAAA,CACA,UAAA,CACA,iCACC,mDAAA,CAGA,sDACC,yCAAA",sourcesContent:["\n.button {\n\twidth: 44px;\n\theight: 44px;\n\tbackground-color: var(--color-main-background);\n\tborder: none;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-left: 254px;\n\tmargin-top: 13px;\n\topacity: .7;\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t\tbackground-color:var(--color-background-hover);\n\t}\n\t&:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: .5;\n\t\tanimation: rotation 2s linear;\n\t}\n}\n:deep(.app-navigation-new button) {\n\twidth: 240px !important;\n\theight: 44px;\n}\n@keyframes rotation {\nfrom {\n\ttransform: rotate(-0deg);\n}\nto {\n\t\ttransform: rotate(-360deg);\n\t}\n}\n.app-navigation-spacer {\n\torder: 0 !important;\n}\n:deep(.settings-button) {\n\tfont-weight: bold !important;\n\tz-index: 1;\n}\n.outbox {\n\tmargin-left: 6px;\n\twidth: auto;\n\t&__border {\n\t\tborder-top: 1px solid var(--color-background-darker);\n\t}\n\t:deep(.app-navigation-entry) {\n\t\t&.active {\n\t\t\tbackground-color: transparent !important;\n\t\t}\n\t}\n}\n\n"],sourceRoot:""}]),e.Z=a},99165:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,"[data-v-7b982a77] .app-navigation-entry__title{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./src/components/NavigationAccountExpandCollapse.vue"],names:[],mappings:"AACA,+CACC,mCAAA",sourcesContent:["\n:deep(.app-navigation-entry__title) {\n\tcolor: var(--color-text-maxcontrast);\n}\n"],sourceRoot:""}]),e.Z=a},81734:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,".counter-bubble__counter[data-v-7d3fbf8c]{max-width:initial}","",{version:3,sources:["webpack://./src/components/NavigationMailbox.vue"],names:[],mappings:"AACA,0CACC,iBAAA",sourcesContent:["\n.counter-bubble__counter {\n\tmax-width: initial;\n}\n"],sourceRoot:""}]),e.Z=a},58860:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,".navigation-outbox__unread-counter[data-v-701039d4]{margin-right:calc(var(--default-grid-baseline)*2)}.outbox-opacity-icon[data-v-701039d4]{opacity:.7}.outbox-opacity-icon[data-v-701039d4]:hover{opacity:1}","",{version:3,sources:["webpack://./src/components/NavigationOutbox.vue"],names:[],mappings:"AAEC,oDACC,iDAAA,CAIF,sCACC,UAAA,CACA,4CACC,SAAA",sourcesContent:["\n.navigation-outbox {\n\t&__unread-counter {\n\t\tmargin-right: calc(var(--default-grid-baseline)*2);\n\t}\n}\n\n.outbox-opacity-icon {\n\topacity: .7;\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]),e.Z=a},68714:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,".header[data-v-3cf3fe54]{display:flex;align-items:center;justify-content:space-between;padding:calc(var(--default-grid-baseline, 4px)*2);gap:4px;height:61px}.refresh__button[data-v-3cf3fe54]{background-color:rgba(0,0,0,0)}.new-message-button[data-v-3cf3fe54]{background-image:var(--gradient-primary-background)}","",{version:3,sources:["webpack://./src/components/NewMessageButtonHeader.vue"],names:[],mappings:"AACA,yBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iDAAA,CACA,OAAA,CACA,WAAA,CAED,kCACC,8BAAA,CAED,qCACC,mDAAA",sourcesContent:["\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\tgap: 4px;\n\theight: 61px;\n}\n.refresh__button {\n\tbackground-color: transparent;\n}\n.new-message-button {\n\tbackground-image: var(--gradient-primary-background);\n}\n"],sourceRoot:""}]),e.Z=a},93385:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,".certificate-modal[data-v-7e3b11da]{padding:20px}.certificate-modal__list table[data-v-7e3b11da]{width:100%}.certificate-modal__list table th[data-v-7e3b11da]{color:var(--color-text-maxcontrast)}.certificate-modal__list table th[data-v-7e3b11da],.certificate-modal__list table td[data-v-7e3b11da]{padding:2.5px}.certificate-modal__list table tr[data-v-7e3b11da]:hover{background-color:unset}.certificate-modal__list__actions[data-v-7e3b11da]{margin:12px;float:right}.certificate-modal__import[data-v-7e3b11da]{display:flex;flex-direction:column;gap:10px}.certificate-modal__import input[type=file][data-v-7e3b11da]{display:flex;width:100%}.certificate-modal__import__type[data-v-7e3b11da]{display:flex;gap:0 20px;flex-wrap:wrap}.certificate-modal__import__type>div[data-v-7e3b11da]{display:flex;gap:5px;align-items:center}.certificate-modal__import__hints[data-v-7e3b11da]{color:var(--color-text-maxcontrast)}.certificate-modal__import__actions[data-v-7e3b11da]{display:flex;justify-content:space-between;gap:15px}","",{version:3,sources:["webpack://./src/components/smime/SmimeCertificateModal.vue"],names:[],mappings:"AACA,oCACC,YAAA,CAGC,gDACC,UAAA,CAEA,mDACC,mCAAA,CAGD,sGACC,aAAA,CAID,yDACC,sBAAA,CAIF,mDACC,WAAA,CACA,WAAA,CAIF,4CACC,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,6DACC,YAAA,CACA,UAAA,CAGD,kDACC,YAAA,CACA,UAAA,CACA,cAAA,CAEA,sDACC,YAAA,CACA,OAAA,CACA,kBAAA,CAIF,mDACC,mCAAA,CAGD,qDACC,YAAA,CACA,6BAAA,CACA,QAAA",sourcesContent:["\n.certificate-modal {\n\tpadding: 20px;\n\n\t&__list {\n\t\ttable {\n\t\t\twidth: 100%;\n\n\t\t\tth {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\tth, td {\n\t\t\t\tpadding: 2.5px;\n\t\t\t}\n\n\t\t\t// Disable default hover style\n\t\t\ttr:hover {\n\t\t\t\tbackground-color: unset;\n\t\t\t}\n\t\t}\n\n\t\t&__actions {\n\t\t\tmargin: 12px;\n\t\t\tfloat: right;\n\t\t}\n\t}\n\n\t&__import {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 10px;\n\n\t\tinput[type=file] {\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&__type {\n\t\t\tdisplay: flex;\n\t\t\tgap: 0 20px;\n\t\t\tflex-wrap: wrap;\n\n\t\t\t> div {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 5px;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\n\t\t&__hints {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\n\t\t&__actions {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: 15px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),e.Z=a},87507:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),i=n(23645),a=n.n(i)()(o());a.push([t.id,"[data-v-17eaba5f] .modal-wrapper .modal-container{display:block;overflow:scroll;transition:transform 300ms ease;border-radius:var(--border-radius-large);box-shadow:0 0 40px rgba(0,0,0,.2);padding:30px 40px 20px}dt[data-v-17eaba5f]{width:auto;text-align:left}","",{version:3,sources:["webpack://./src/views/KeyboardShortcuts.vue"],names:[],mappings:"AACA,kDACC,aAAA,CACA,eAAA,CACA,+BAAA,CACA,wCAAA,CACA,kCAAA,CACA,sBAAA,CAED,oBACC,UAAA,CACA,eAAA",sourcesContent:["\n:deep(.modal-wrapper .modal-container) {\n\tdisplay: block;\n\toverflow: scroll;\n\ttransition: transform 300ms ease;\n\tborder-radius: var(--border-radius-large);\n\tbox-shadow: 0 0 40px rgba(0,0,0,0.2);\n\tpadding: 30px 40px 20px;\n}\ndt {\n\twidth: auto;\n\ttext-align: left;\n}\n\n"],sourceRoot:""}]),e.Z=a},89236:function(t,e,n){"use strict";n.d(e,{Z:function(){return O}});var r=n(15961),o=n(11585),i=n(15764),a=n(73229),c=n(7844),s=n(18574),l=n(76188),u=n(34829),d=n(31352),f=n(72488),p=n(47360),h={name:"MailboxPicker",components:{ButtonVue:r.P2,Modal:r.Jc,IconInbox:i.Z,IconDraft:a.default,IconSent:c.Z,IconArchive:s.Z,IconTrash:l.Z,IconFolder:u.default,IconBreadcrumb:o.default,IconLoading:r.lb},props:{account:{type:Object,required:!0},selected:{type:Number,required:!1,default:void 0},loading:{type:Boolean,required:!1,default:!1},labelSelect:{type:String,default:(0,d.Iu)("mail","Choose")},labelSelectLoading:{type:String,default:(0,d.Iu)("mail","Choose")},pickedMailbox:{type:Object,required:!1,default:function(){}},allowRoot:{type:Boolean,default:!1}},data:function(){return{selectedMailboxId:void 0,mailboxCrumbs:[]}},computed:{mailboxes:function(){return this.selectedMailboxId?this.$store.getters.getSubMailboxes(this.selectedMailboxId):this.$store.getters.getMailboxes(this.account.accountId)},filteredMailboxes:function(){var t=this;return this.pickedMailbox?this.mailboxes.filter((function(e){return e.databaseId!==t.pickedMailbox.databaseId&&(0,p.Y)(e,"k")})):this.mailboxes.filter((function(t){return(0,p.Y)(t,"i")}))}},methods:{getMailboxIcon:function(t){return t.specialRole?"icon-"+t.specialRole:"icon-folder"},getMailboxTitle:function(t){return(0,f.I)(t)},onClickHome:function(){this.selectedMailboxId=void 0,this.$emit("update:selected",void 0),this.mailboxCrumbs=[]},onClickCrumb:function(t){this.selectedMailboxId=this.mailboxCrumbs[t].databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs=this.mailboxCrumbs.slice(0,t+1)},onClickMailbox:function(t){this.selectedMailboxId=t.databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs.push(t)},onSelect:function(){this.$emit("select",this.selectedMailboxId)},onClose:function(){this.$emit("close")}}},v=n(93379),m=n.n(v),b=n(7795),g=n.n(b),y=n(90569),A=n.n(y),x=n(3565),w=n.n(x),C=n(19216),_=n.n(C),k=n(44589),S=n.n(k),I=n(19093),E={};E.styleTagTransform=S(),E.setAttributes=w(),E.insert=A().bind(null,"head"),E.domAPI=g(),E.insertStyleElement=_(),m()(I.Z,E),I.Z&&I.Z.locals&&I.Z.locals;var L=(0,n(51900).Z)(h,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{ref:"content",staticClass:"modal-content"},[e("h2",{staticClass:"oc-dialog-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Choose target mailbox"))+"\n\t\t")]),t._v(" "),e("span",{staticClass:"crumbs"},[e("div",{on:{click:function(e){return e.preventDefault(),t.onClickHome.apply(null,arguments)}}},[e("IconInbox",{attrs:{size:20}})],1),t._v(" "),t._l(t.mailboxCrumbs,(function(n,r){return e("div",{key:n.databaseId,staticClass:"level"},[e("IconBreadcrumb",{attrs:{size:20}}),t._v(" "),e("a",{on:{click:function(e){return e.preventDefault(),t.onClickCrumb(r)}}},[t._v("\n\t\t\t\t\t"+t._s(t.getMailboxTitle(n))+"\n\t\t\t\t")])],1)}))],2),t._v(" "),e("div",{staticClass:"mailbox-list"},[t.filteredMailboxes.length>0?e("ul",t._l(t.filteredMailboxes,(function(n){return e("li",{key:n.databaseId,on:{click:function(e){return e.preventDefault(),t.onClickMailbox(n)}}},["inbox"===n.specialRole?e("IconInbox",{attrs:{size:20}}):"drafts"===n.specialRole?e("IconDraft",{attrs:{size:20}}):"sent"===n.specialRole?e("IconSent",{attrs:{size:20}}):"archive"===n.specialRole?e("IconArchive",{attrs:{size:20}}):"trash"===n.specialRole?e("IconTrash",{attrs:{size:20}}):e("IconFolder",{attrs:{size:20}}),t._v(" "),e("div",{staticClass:"mailbox-title"},[t._v("\n\t\t\t\t\t\t"+t._s(t.getMailboxTitle(n))+"\n\t\t\t\t\t")])],1)})),0):e("IconFolder",{attrs:{size:65}}),t._v(" "),e("div",{staticClass:"empty-icon empty"}),t._v(" "),e("h2",[t._v(t._s(t.t("mail","No more submailboxes in here")))])],1),t._v(" "),e("div",{staticClass:"buttons"},[e("ButtonVue",{attrs:{type:"primary",disabled:t.loading||!t.allowRoot&&!t.selectedMailboxId,"aria-label":t.loading?t.labelSelectLoading:t.labelSelect},on:{click:t.onSelect},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):t._e()]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.loading?t.labelSelectLoading:t.labelSelect)+"\n\t\t\t")])],1)])])}),[],!1,null,"06e0ced4",null),O=L.exports},9745:function(e,n,r){"use strict";r.d(n,{Z:function(){return Re}});var o=r(15961),i=r(33125),a=r(3378),c=r(79753),s=r(2568),l=r.n(s),u=r(12085),d=r.n(u),f=r(89177),p=r(71093),h=r(37838),v=r(46703),m=r(34829),b=r(41622),g=r(50009),y=r(76188),A=r(82124),x=r(40743);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function C(){C=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new I(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(E([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==w(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function _(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var k={name:"NavigationAccount",components:{AppNavigationItem:o.tn,ActionButton:o.Js,ActionCheckbox:o.Bt,ActionInput:o.Iw,ActionText:o.L1,AccountSettings:function(){return Promise.all([r.e(543),r.e(909),r.e(589),r.e(733),r.e(717),r.e(113)]).then(r.bind(r,35843))},IconInfo:h.Z,IconSettings:v.default,IconFolderAdd:m.default,MenuDown:b.default,MenuUp:g.default,IconDelete:y.Z,IconError:A.Z,IconBullet:x.Z,IconLoading:o.lb},props:{account:{type:Object,required:!0},firstMailbox:{type:Object,default:function(){}},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:function(){return{menuOpen:!1,loading:{delete:!1},savingShowOnlySubscribed:!1,quota:void 0,editing:!1,showSaving:!1,showSettings:!1,createMailboxName:""}},computed:{visible:function(){return!0!==this.account.isUnified&&!1!==this.account.visible},firstMailboxRoute:function(){return this.firstMailbox&&!this.isDisabled?{name:"mailbox",params:{mailboxId:this.firstMailbox.databaseId}}:""},id:function(){return"account-"+this.account.id},bulletColor:function(){return this.account.error?void 0:(t=this.account.emailAddress,e=l()(t),n=d().hex.hsl(e),r=[40*Math.round(n[0]/40),n[1],n[2]],"#"+d().hsl.hex(r));var t,e,n,r},quotaText:function(){return void 0===this.quota?t("mail","Loading …"):!1===this.quota?t("mail","Not supported by the server"):t("mail","{usage} of {limit} used",{usage:(0,a.s)(this.quota.usage),limit:(0,a.s)(this.quota.limit)})}},methods:{createMailbox:function(t){this.editing=!0;var e=this.createMailboxName;f.Z.info("creating mailbox "+e),this.menuOpen=!1,this.$store.dispatch("createMailbox",{account:this.account,name:e}).then((function(){return f.Z.info("mailbox ".concat(e," created"))})).catch((function(t){throw f.Z.error("could not create mailbox",{error:t}),t})),this.editing=!1,this.showSaving=!1},openCreateMailbox:function(){this.editing=!0,this.showSaving=!1},removeAccount:function(){var e=this,n=this.account.id;f.Z.info("delete account",{account:this.account});var r=t("mail","The account for {email} and cached email data will be removed from Nextcloud, but not from your email provider.",{email:this.account.emailAddress});OC.dialogs.confirmDestructive(r,t("mail","Remove account {email}",{email:this.account.emailAddress}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Remove {email}",{email:this.account.emailAddress}),confirmClasses:"error",cancel:t("mail","Cancel")},(function(t){if(t)return e.$store.dispatch("deleteAccount",e.account).then((function(){e.loading.delete=!0})).then((function(){f.Z.info("account ".concat(n," deleted, redirecting …")),location.href=(0,c.generateUrl)("/apps/mail")})).catch((function(t){return f.Z.error("could not delete account",{error:t})}));e.loading.delete=!1}))},changeAccountOrderUp:function(){this.$store.dispatch("moveAccount",{account:this.account,up:!0}).catch((function(t){return f.Z.error("could not move account up",{error:t})}))},changeAccountOrderDown:function(){this.$store.dispatch("moveAccount",{account:this.account}).catch((function(t){return f.Z.error("could not move account down",{error:t})}))},changeShowSubscribedOnly:function(t){var e=this;this.savingShowOnlySubscribed=!0,this.$store.dispatch("patchAccount",{account:this.account,data:{showSubscribedOnly:t}}).then((function(){e.savingShowOnlySubscribed=!1,f.Z.info("show only subscribed mailboxes updated to "+t)})).catch((function(t){throw f.Z.error("could not update subscription mode",{error:t}),e.savingShowOnlySubscribed=!1,t}))},onMenuToggle:function(t){t&&(console.debug("accounts menu opened, fetching quota"),this.fetchQuota())},fetchQuota:function(){var t,e=this;return(t=C().mark((function t(){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.q9)(e.account.id);case 2:n=t.sent,console.debug("quota fetched",{quota:n}),e.quota=void 0!==n&&n;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_(i,r,o,a,c,"next",t)}function c(t){_(i,r,o,a,c,"throw",t)}a(void 0)}))})()},toggleAccountSettings:function(){this.showSettings=!this.showSettings},showAccountSettings:function(){this.showSettings=!0}}},S=k,I=r(51900),E=(0,I.Z)(S,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{key:t.id,attrs:{id:t.id,"menu-open":t.menuOpen,title:t.account.emailAddress,to:t.firstMailboxRoute,exact:!0},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.account.error||t.isDisabled?e("IconError",{attrs:{size:20}}):t.bulletColor?e("IconBullet",{attrs:{size:16,"fill-color":t.bulletColor}}):t._e()]},proxy:!0},{key:"actions",fn:function(){return[t.isDisabled?[e("ActionText",{attrs:{title:t.t("mail","Provisioned account is disabled")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}],null,!1,3812223437)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Please login using a password to enable this account. The current session is using passwordless authentication, e.g. SSO or WebAuthn."))+"\n\t\t\t")])]:[t.account.isUnified?t._e():e("ActionText",{attrs:{title:t.t("mail","Quota")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}],null,!1,3812223437)},[t._v("\n\t\t\t\t"+t._s(t.quotaText)+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.showAccountSettings,shortkey:t.toggleAccountSettings},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSettings",{attrs:{size:20}})]},proxy:!0}],null,!1,408832678)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Account settings"))+"\n\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:t.account.showSubscribedOnly,disabled:t.savingShowOnlySubscribed},on:{"update:checked":t.changeShowSubscribedOnly}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Show only subscribed mailboxes"))+"\n\t\t\t")]),t._v(" "),t.editing?t._e():e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add mailbox"))+"\n\t\t\t")]),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Mailbox name"))+"\n\t\t\t")]):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t\t")]):t._e(),t._v(" "),t.isFirst?t._e():e("ActionButton",{on:{click:t.changeAccountOrderUp},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuUp",{attrs:{size:20}})]},proxy:!0}],null,!1,859424094)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move up"))+"\n\t\t\t")]),t._v(" "),t.isLast?t._e():e("ActionButton",{on:{click:t.changeAccountOrderDown},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuDown",{attrs:{size:20}})]},proxy:!0}],null,!1,3657048169)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move down"))+"\n\t\t\t")]),t._v(" "),t.account.provisioningId?t._e():e("ActionButton",{on:{click:t.removeAccount},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Remove account"))+"\n\t\t\t")])]]},proxy:!0},{key:"extra",fn:function(){return[e("AccountSettings",{attrs:{open:t.showSettings,account:t.account},on:{"update:open":t.toggleAccountSettings}})]},proxy:!0}],null,!1,1916006566)}):t._e()}),[],!1,null,null,null),L=E.exports;function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function M(){M=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new k(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==O(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function P(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var T={name:"NavigationAccountExpandCollapse",components:{AppNavigationItem:o.tn},props:{account:{type:Object,required:!0}},computed:{id:function(){return"collapse-"+this.account.id},title:function(){return this.account.collapsed&&this.account.showSubscribedOnly?t("mail","Show all subscribed mailboxes"):this.account.collapsed&&!this.account.showSubscribedOnly?t("mail","Show all mailboxes"):t("mail","Collapse mailboxes")}},methods:{toggleCollapse:function(){var t,e=this;return(t=M().mark((function t(){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.Z.debug("toggling collapsed mailboxes for account "+e.account.id),t.prev=1,t.next=4,e.$store.commit("toggleAccountCollapsed",e.account.id);case 4:return t.next=6,e.$store.dispatch("setAccountSetting",{accountId:e.account.id,key:"collapsed",value:e.account.collapsed});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),f.Z.error("could not update account settings",{error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){P(i,r,o,a,c,"next",t)}function c(t){P(i,r,o,a,c,"throw",t)}a(void 0)}))})()}}},j=T,N=r(93379),D=r.n(N),Z=r(7795),B=r.n(Z),F=r(90569),$=r.n(F),G=r(3565),z=r.n(G),R=r(19216),U=r.n(R),Y=r(44589),K=r.n(Y),q=r(99165),V={};V.styleTagTransform=K(),V.setAttributes=z(),V.insert=$().bind(null,"head"),V.domAPI=B(),V.insertStyleElement=U(),D()(q.Z,V),q.Z&&q.Z.locals&&q.Z.locals;var H=(0,I.Z)(j,(function(){var t=this;return(0,t._self._c)("AppNavigationItem",{attrs:{title:t.title},on:{click:t.toggleCollapse}})}),[],!1,null,"7b982a77",null).exports,J=r(44588),W=r(71598),Q=r(15496),X=r(77022),tt=r(4777),et=r(37328),nt=r(16632),rt=r(73229),ot=r(18574),it=r(15764),at=r(93354),ct=r(62576),st=r(12525),lt=r(82659),ut=r(7844);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ft(){ft=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new k(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==dt(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function pt(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var ht={name:"MoveMailboxModal",components:{MailboxPicker:r(89236).Z},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:function(){return{moving:!1,destMailboxId:void 0}},methods:{onClose:function(){this.$emit("close")},onMove:function(){var t,e=this;return(t=ft().mark((function t(){var n,r,o;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.moving=!0,e.mailbox.id===e.destMailboxId){t.next=22;break}if(t.prev=2,e.destMailboxId){t.next=9;break}return n=e.mailbox.displayName,t.next=7,e.$store.dispatch("renameMailbox",{account:e.account,mailbox:e.mailbox,newName:n});case 7:t.next=13;break;case 9:return r=e.$store.getters.getMailbox(e.destMailboxId),o=r.name+e.mailbox.delimiter+e.mailbox.name,t.next=13,e.$store.dispatch("renameMailbox",{account:e.account,mailbox:e.mailbox,newName:o});case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),f.Z.error("could not move mailbox",{error:t.t0});case 18:return t.prev=18,e.moving=!1,e.$emit("close"),t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[2,15,18,22]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){pt(i,r,o,a,c,"next",t)}function c(t){pt(i,r,o,a,c,"throw",t)}a(void 0)}))})()},genId:function(t){return"mailbox-"+t.databaseId}}},vt=ht,mt=(0,I.Z)(vt,(function(){var t=this;return(0,t._self._c)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"picked-mailbox":t.mailbox,"allow-root":!0,"label-select":t.t("mail","Move"),"label-select-loading":t.t("mail","Moving")},on:{"update:selected":function(e){t.destMailboxId=e},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports,bt=r(98238),gt=r(47360),yt=r(64648),At=r(4956),xt=r(31352),wt=r(72488),Ct=r(64024),_t=r(129),kt=r(90162);function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function It(){It=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new k(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==St(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Et(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Lt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Et(i,r,o,a,c,"next",t)}function c(t){Et(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==St(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===St(o)?o:String(o)),r)}var o}var Mt,Pt=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.options=r,this.registerListeners.bind(this)(e),this.setInitialAttributes()}var e,n,r,o;return e=t,n=[{key:"setInitialAttributes",value:function(){this.draggableInfo={},this.setStatus("enabled")}},{key:"update",value:function(t,e){this.setInitialAttributes(),this.options=e.options}},{key:"registerListeners",value:function(t){kt.Z.$on("drag-start",this.onDragStart.bind(this)),kt.Z.$on("drag-end",this.onDragEnd.bind(this)),t.firstChild.addEventListener("dragover",this.onDragOver.bind(this)),t.firstChild.addEventListener("dragleave",this.onDragLeave.bind(this)),t.firstChild.addEventListener("drop",this.onDrop.bind(this))}},{key:"removeListeners",value:function(t){kt.Z.$off("drag-start",this.onDragStart),kt.Z.$off("drag-end",this.onDragEnd),t.firstChild.removeEventListener("dragover",this.onDragOver),t.firstChild.removeEventListener("dragleave",this.onDragLeave),t.firstChild.removeEventListener("drop",this.onDrop)}},{key:"setStatus",value:function(t){this.el.setAttribute("droppable-mailbox",t)}},{key:"onDragStart",value:function(t){this.draggableInfo=t,this.canBeDropped()||this.setStatus("disabled")}},{key:"canBeDropped",value:function(){return this.isSameAccount()&&this.options.isValidDropTarget}},{key:"isSameAccount",value:function(){return this.draggableInfo.accountId===this.options.accountId}},{key:"onDragEnd",value:function(){this.setInitialAttributes()}},{key:"onDragOver",value:function(t){t.preventDefault(),this.draggableInfo.mailboxId!==this.options.mailboxId&&(this.options.isValidDropTarget&&this.setStatus("dragover"),t.dataTransfer.dropEffect="move")}},{key:"onDragLeave",value:function(t){t.preventDefault(),this.setStatus("enabled")}},{key:"onDrop",value:(o=Lt(It().mark((function t(e){var n,r,o=this;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),this.draggableInfo.mailboxId!==this.options.mailboxId){t.next=3;break}return t.abrupt("return");case 3:return this.setInitialAttributes(),n=JSON.parse(e.dataTransfer.getData("text")),kt.Z.$emit("envelopes-dropped",{envelopes:n}),t.prev=6,r=n.map(function(){var t=Lt(It().mark((function t(e){var n;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.processDroppedItem(parseInt(e.envelopeId));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=10,Promise.all(r);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),f.Z.error("could not process dropped messages",t.t0);case 15:return t.prev=15,kt.Z.$emit("envelopes-moved",{mailboxId:this.options.mailboxId,movedEnvelopes:n}),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[6,12,15,18]])}))),function(t){return o.apply(this,arguments)})},{key:"processDroppedItem",value:(r=Lt(It().mark((function t(e){var n;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=document.querySelector('[data-envelope-id="'.concat(e,'"]'))).setAttribute("draggable-envelope","pending"),t.prev=2,t.next=5,_t.Z.dispatch("moveMessage",{id:e,destMailboxId:this.options.mailboxId});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),n.removeAttribute("draggable-envelope"),f.Z.error("could not move messages",t.t0);case 11:case"end":return t.stop()}}),t,this,[[2,7]])}))),function(t){return r.apply(this,arguments)})}],n&&Ot(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Tt={bind:function(t,e,n){Mt=new Pt(t,n.context,e.value)},componentUpdated:function(t,e){Mt.options=e.value,Mt.update(t,Mt)}},jt=r(5068);function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Dt(){Dt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new k(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Nt(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Zt(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Bt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Zt(i,r,o,a,c,"next",t)}function c(t){Zt(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){Gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Nt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Nt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zt={name:"NavigationMailbox",components:{AppNavigationItem:o.tn,CounterBubble:o.JN,ActionText:o.L1,ActionButton:o.Js,ActionCheckbox:o.Bt,ActionInput:o.Iw,IconSend:ut.Z,IconDelete:y.Z,IconEmailCheck:J.Z,IconExternal:W.Z,IconFolderAdd:X.Z,IconFolderRename:et.Z,IconFolderSync:nt.Z,IconInfo:h.Z,IconAllInboxes:ct.Z,IconFavorite:tt.default,IconFolder:m.default,IconFolderShared:Q.Z,IconDraft:rt.default,IconArchive:ot.Z,IconJunk:at.Z,IconInbox:it.Z,EraserVariant:st.Z,ImportantIcon:lt.Z,IconLoading:o.lb,MoveMailboxModal:mt,AlarmIcon:jt.Z},directives:{droppableMailbox:Tt},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},filter:{type:String,default:"",required:!1}},data:function(){var t,e;return{debug:(null===(t=window)||void 0===t||null===(e=t.OC)||void 0===e?void 0:e.debug)||!1,mailboxStats:void 0,loadingMarkAsRead:!1,clearingCache:!1,showSaving:!1,changeSubscription:!1,changingSyncInBackground:!1,editing:!1,showSubMailboxes:!1,menuOpen:!1,renameLabel:!0,renameInput:!1,mailboxName:this.mailbox.displayName,showMoveModal:!1,hasDelimiter:!!this.mailbox.delimiter,UNIFIED_INBOX_ID:bt.e0,createMailboxName:""}},computed:{visible:function(){return(!1===this.account.showSubscribedOnly||this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed"))&&this.isUnifiedButOnlyInbox},notInbox:function(){return"inbox"!==this.mailbox.name.toLowerCase()},notVirtual:function(){return!this.account.isUnified&&"flagged"!==this.mailbox.specialRole&&!this.filter},title:function(){return"starred"===this.filter?(0,wt.I)($t($t({},this.mailbox),{},{specialUse:["flagged"]})):(0,wt.I)(this.mailbox)},to:function(){return{name:"mailbox",params:{mailboxId:this.mailbox.databaseId,filter:this.filter?this.filter:void 0}}},hasSubMailboxes:function(){return this.subMailboxes.length>0},subMailboxes:function(){return this.$store.getters.getSubMailboxes(this.mailbox.databaseId)},statsText:function(){return this.mailboxStats&&"total"in this.mailboxStats&&"unread"in this.mailboxStats?0===this.mailboxStats.unread?(0,xt.uN)("mail","{total} message","{total} messages",this.mailboxStats.total,{total:this.mailboxStats.total}):(0,xt.uN)("mail","{unread} unread of {total}","{unread} unread of {total}",this.mailboxStats.unread,{total:this.mailboxStats.total,unread:this.mailboxStats.unread}):t("mail","Loading …")},isSubscribed:function(){return this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed")},isDroppableSpecialMailbox:function(){return"starred"!==this.filter&&![this.account.draftsMailboxId,this.account.sentMailboxId].includes(this.mailbox.databaseId)},isActive:function(){return this.$route.params.mailboxId===this.mailbox.databaseId},isValidDropTarget:function(){return!(this.isActive||!this.hasInsertAcl)&&(this.isDroppableSpecialMailbox||!this.mailbox.specialRole&&!this.account.isUnified)},isUnifiedButOnlyInbox:function(){return!this.mailbox.isUnified||this.mailbox.specialUse.includes("inbox")&&this.$store.getters.accounts.length>2},showUnreadCounter:function(){return"starred"!==this.filter&&"trash"!==this.mailbox.specialRole&&(this.mailbox.unread>0||this.subCounter>0)},subCounter:function(){return this.subMailboxes.reduce((function(t,e){return t+e.unread}),0)},hasRenameAcl:function(){if(!this.mailbox.myAcls)return!0;var t=this.$store.getters.getParentMailbox(this.mailbox.databaseId);return t&&t.myAcls?(0,gt.Y)(this.mailbox,"x")&&(0,gt.Y)(t,"k"):(0,gt.Y)(this.mailbox,"x")},hasInsertAcl:function(){return(0,gt.Y)(this.mailbox,"i")},hasSeenAcl:function(){return(0,gt.Y)(this.mailbox,"s")},hasSubmailboxActionAcl:function(){return(0,gt.Y)(this.mailbox,"k")},hasDeleteAcl:function(){return(0,gt.Y)(this.mailbox,"x")},hasClearMailboxAcl:function(){return(0,gt.Y)(this.mailbox,"te")}},mounted:function(){kt.Z.$on("drag-start",this.onDragStart),kt.Z.$on("drag-end",this.onDragEnd),kt.Z.$on("envelopes-moved",this.onEnvelopesMoved)},beforeDestroy:function(){kt.Z.$off("drag-start",this.onDragStart),kt.Z.$off("drag-end",this.onDragEnd),kt.Z.$off("envelopes-moved",this.onEnvelopesMoved)},methods:{genId:function(t){return"mailbox-"+t.databaseId},onMenuToggle:function(t){t&&this.fetchMailboxStats()},fetchMailboxStats:function(){var t=this;return Bt(Dt().mark((function e(){var n;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mailboxStats=null,!t.account.isUnified&&"flagged"!==t.mailbox.specialRole){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,At.Y2)(t.mailbox.databaseId);case 6:n=e.sent,f.Z.debug("loaded mailbox stats for ".concat(t.mailbox.databaseId),{stats:n}),t.mailboxStats=n,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t.mailboxStats={error:!0},f.Z.error("could not load mailbox stats for ".concat(t.mailbox.databaseId),e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()},createMailbox:function(t){var e=this;return Bt(Dt().mark((function t(){var n,r;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editing=!0,n=e.createMailboxName,r=e.mailbox.name+e.mailbox.delimiter+n,f.Z.info("creating mailbox ".concat(r," as submailbox of ").concat(e.mailbox.databaseId)),e.menuOpen=!1,t.prev=5,t.next=8,e.$store.dispatch("createMailbox",{account:e.account,name:r});case 8:t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(5),f.Z.error("could not create mailbox ".concat(r),{error:t.t0}),t.t0;case 14:return t.prev=14,e.editing=!1,e.showSaving=!1,t.finish(14);case 18:f.Z.info("mailbox ".concat(r," created")),e.showSubMailboxes=!0;case 20:case"end":return t.stop()}}),t,null,[[5,10,14,18]])})))()},openCreateMailbox:function(){this.editing=!0,this.showSaving=!1},markAsRead:function(){var t=this;this.loadingMarkAsRead=!0,this.$store.dispatch("markMailboxRead",{accountId:this.account.id,mailboxId:this.mailbox.databaseId}).then((function(){return f.Z.info("mailbox ".concat(t.mailbox.databaseId," marked as read"))})).catch((function(e){return f.Z.error("could not mark mailbox ".concat(t.mailbox.databaseId," as read"),{error:e})})).then((function(){return t.loadingMarkAsRead=!1}))},changeFolderSubscription:function(t){var e=this;return Bt(Dt().mark((function n(){return Dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.changeSubscription=!0,n.next=4,e.$store.dispatch("changeMailboxSubscription",{mailbox:e.mailbox,subscribed:t});case 4:n.next=10;break;case 6:throw n.prev=6,n.t0=n.catch(0),f.Z.error("could not update subscription of mailbox ".concat(e.mailbox.databaseId),{error:n.t0}),n.t0;case 10:return n.prev=10,e.changeSubscription=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,6,10,13]])})))()},changeSyncInBackground:function(t){var e=this;return Bt(Dt().mark((function n(){return Dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.changingSyncInBackground=!0,n.next=4,e.$store.dispatch("patchMailbox",{mailbox:e.mailbox,attributes:{syncInBackground:t}});case 4:n.next=10;break;case 6:throw n.prev=6,n.t0=n.catch(0),f.Z.error("could not update background sync flag of mailbox ".concat(e.mailbox.databaseId),{error:n.t0}),n.t0;case 10:return n.prev=10,e.changingSyncInBackground=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,6,10,13]])})))()},clearCache:function(){var t=this;return Bt(Dt().mark((function e(){return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.clearingCache=!0,f.Z.debug("clearing message cache",{accountId:t.account.id,mailboxId:t.mailbox.databaseId}),e.next=5,(0,yt.LK)(t.account.id,t.mailbox.databaseId);case 5:window.location.reload(!1);case 6:return e.prev=6,t.clearCache=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})))()},clearMailbox:function(){var e=this,n=this.mailbox.databaseId;OC.dialogs.confirmDestructive(t("mail","All messages in mailbox will be deleted."),t("mail","Clear mailbox {name}",{name:this.mailbox.displayName}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Clear mailbox"),confirmClasses:"error",cancel:t("mail","Cancel")},(function(t){if(t)return e.$store.dispatch("clearMailbox",{mailbox:e.mailbox}).then((function(){f.Z.info("mailbox ".concat(n," cleared"))})).catch((function(t){return f.Z.error("could not clear mailbox",{error:t})}))}))},deleteMailbox:function(){var e=this,n=this.mailbox.databaseId;f.Z.info("delete mailbox",{mailbox:this.mailbox}),OC.dialogs.confirmDestructive(t("mail","The mailbox and all messages in it will be deleted."),t("mail","Delete mailbox"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Delete mailbox {name}",{name:this.mailbox.displayName}),confirmClasses:"error",cancel:t("mail","Cancel")},(function(t){if(t)return e.$store.dispatch("deleteMailbox",{mailbox:e.mailbox}).then((function(){f.Z.info("mailbox ".concat(n," deleted")),parseInt(e.$route.params.mailboxId,10)===e.mailbox.databaseId&&e.$router.push({name:"mailbox",params:{mailboxId:bt.cd}})})).catch((function(t){return f.Z.error("could not delete mailbox",{error:t})}))}))},renameMailbox:function(){var e=this;return Bt(Dt().mark((function n(){return Dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.renameInput=!1,e.showSaving=!1,n.prev=2,n.next=5,e.$store.dispatch("renameMailbox",{account:e.account,mailbox:e.mailbox,newName:e.mailboxName});case 5:e.renameLabel=!0,e.renameInput=!1,e.showSaving=!1,n.next=17;break;case 10:n.prev=10,n.t0=n.catch(2),(0,Ct.JQ)(t("mail","An error occurred, unable to rename the mailbox.")),console.error(n.t0),e.renameLabel=!1,e.renameInput=!1,e.showSaving=!0;case 17:case"end":return n.stop()}}),n,null,[[2,10]])})))()},openRenameInput:function(){this.renameLabel=!1,this.renameInput=!0,this.showSaving=!1},onOpenMoveModal:function(){this.showMoveModal=!0},onCloseMoveModal:function(){this.showMoveModal=!1},onDragStart:function(t){var e=t.accountId;e===this.mailbox.accountId&&(this.$store.commit("expandAccount",e),this.showSubMailboxes=!0)},onDragEnd:function(t){t.accountId===this.mailbox.accountId&&(this.showSubMailboxes=!1)},onEnvelopesMoved:function(t){var e=this,n=t.mailboxId,r=t.movedEnvelopes;if(this.mailbox.databaseId===n){var o,i=r.find((function(t){return t.envelopeId===e.$route.params.threadId}));"message"===this.$route.name&&i&&this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(o=this.$route.params)||void 0===o?void 0:o.filter}})}}}},Rt=r(81734),Ut={};Ut.styleTagTransform=K(),Ut.setAttributes=z(),Ut.insert=$().bind(null,"head"),Ut.domAPI=B(),Ut.insertStyleElement=U(),D()(Rt.Z,Ut),Rt.Z&&Rt.Z.locals&&Rt.Z.locals;var Yt=(0,I.Z)(zt,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{directives:[{name:"droppable-mailbox",rawName:"v-droppable-mailbox",value:{mailboxId:t.mailbox.databaseId,accountId:t.mailbox.accountId,isValidDropTarget:t.isValidDropTarget},expression:"{\n\t\tmailboxId: mailbox.databaseId,\n\t\taccountId: mailbox.accountId,\n\t\tisValidDropTarget,\n\t}"}],key:t.genId(t.mailbox),attrs:{id:t.genId(t.mailbox),"allow-collapse":!0,"menu-open":t.menuOpen,"force-menu":!0,title:t.title,to:t.to,open:t.showSubMailboxes},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e},"update:open":function(e){t.showSubMailboxes=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("div",[t.mailbox.isPriorityInbox?e("ImportantIcon",{attrs:{size:20}}):t.mailbox.id===t.UNIFIED_INBOX_ID?e("IconAllInboxes",{attrs:{size:20}}):"inbox"!==t.mailbox.specialRole||t.mailbox.isPriorityInbox||"starred"===t.filter?"starred"===t.filter?e("IconFavorite",{attrs:{size:20}}):t.mailbox.databaseId===t.account.draftsMailboxId?e("IconDraft",{attrs:{size:20}}):t.mailbox.databaseId===t.account.sentMailboxId?e("IconSend",{attrs:{size:20}}):t.mailbox.databaseId===t.account.archiveMailboxId?e("IconArchive",{attrs:{size:20}}):t.mailbox.databaseId===t.account.trashMailboxId?e("IconDelete",{attrs:{size:20}}):t.mailbox.databaseId===t.account.junkMailboxId?e("IconJunk",{attrs:{size:20}}):t.mailbox.databaseId===t.account.snoozeMailboxId?e("AlarmIcon",{attrs:{size:20}}):t.mailbox.shared?e("IconFolderShared",{attrs:{size:20}}):e("IconFolder",{attrs:{size:20}}):e("IconInbox",{attrs:{size:20}})],1)]},proxy:!0}],null,!1,2020813215)},[t._v(" "),e("template",{slot:"actions"},[t.account.isUnified||"flagged"===t.mailbox.specialRole?t._e():e("ActionText",{attrs:{title:t.mailbox.name},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{title:t.statsText,size:20}})]},proxy:!0}],null,!1,3059915399)},[t._v("\n\t\t\t"+t._s(t.statsText)+"\n\t\t")]),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasSeenAcl?e("ActionButton",{attrs:{title:t.t("mail","Mark all as read"),disabled:t.loadingMarkAsRead},on:{click:t.markAsRead},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmailCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,46646313)},[t._v("\n\t\t\t"+t._s(t.t("mail","Mark all messages of this mailbox as read"))+"\n\t\t")]):t._e(),t._v(" "),!t.editing&&!t.account.isUnified&&t.hasDelimiter&&"flagged"!==t.mailbox.specialRole&&t.hasSubmailboxActionAcl?e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t"+t._s(t.t("mail","Add submailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)}):t._e(),t._v(" "),t.renameLabel&&!t.hasSubMailboxes&&!t.account.isUnified&&t.hasRenameAcl?e("ActionButton",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openRenameInput.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{size:20}})]},proxy:!0}],null,!1,2880355077)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit name"))+"\n\t\t")]):t._e(),t._v(" "),t.renameInput?e("ActionInput",{attrs:{value:t.mailboxName},on:{"update:value":function(e){t.mailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.renameMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{title:t.t("mail","Edit name"),size:20}})]},proxy:!0}],null,!1,2185581176)}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||!t.hasDelimiter||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{attrs:{id:t.genId(t.mailbox),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconExternal",{attrs:{size:20}})]},proxy:!0}],null,!1,1464797790)},[t._v("\n\t\t\t"+t._s(t.t("mail","Move mailbox"))+"\n\t\t")]),t._v(" "),t.debug&&!t.account.isUnified&&"flagged"!==t.mailbox.specialRole?e("ActionButton",{attrs:{title:t.t("mail","Clear cache"),disabled:t.clearingCache},on:{click:t.clearCache},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderSync",{attrs:{size:20}})]},proxy:!0}],null,!1,3488227250)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear locally cached data, in case there are issues with synchronization."))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual?e("ActionCheckbox",{attrs:{checked:t.isSubscribed,disabled:t.changeSubscription},on:{"update:checked":t.changeFolderSubscription}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subscribed"))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual&&t.notInbox?e("ActionCheckbox",{attrs:{checked:t.mailbox.syncInBackground,disabled:t.changingSyncInBackground},on:{"update:checked":t.changeSyncInBackground}},[t._v("\n\t\t\t"+t._s(t.t("mail","Sync in background"))+"\n\t\t")]):t._e(),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasClearMailboxAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.clearMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EraserVariant",{attrs:{size:20}})]},proxy:!0}],null,!1,3994454445)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear mailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{on:{click:t.deleteMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete mailbox"))+"\n\t\t")])],1),t._v(" "),t.showUnreadCounter&&t.subCounter?e("CounterBubble",{attrs:{slot:"counter"},slot:"counter"},[t._v("\n\t\t"+t._s(t.mailbox.unread)+" ("+t._s(t.subCounter)+")\n\t")]):t.showUnreadCounter?e("CounterBubble",{attrs:{slot:"counter"},slot:"counter"},[t._v("\n\t\t"+t._s(t.mailbox.unread)+"\n\t")]):t._e(),t._v(" "),e("template",{slot:"extra"},[t.showMoveModal?e("MoveMailboxModal",{attrs:{account:t.account,mailbox:t.mailbox},on:{close:t.onCloseMoveModal}}):t._e()],1),t._v(" "),t._l(t.subMailboxes,(function(n){return e("NavigationMailbox",{key:t.genId(n),attrs:{account:t.account,mailbox:n}})}))],2):t._e()}),[],!1,null,"7d3fbf8c",null),Kt=Yt.exports,qt=r(71909),Vt={name:"NavigationOutbox",components:{AppNavigationItem:o.tn,CounterBubble:o.JN,IconOutbox:qt.Z},computed:{count:function(){return this.$store.getters["outbox/getAllMessages"].length},to:function(){return{name:"outbox"}}}},Ht=r(58860),Jt={};Jt.styleTagTransform=K(),Jt.setAttributes=z(),Jt.insert=$().bind(null,"head"),Jt.domAPI=B(),Jt.insertStyleElement=U(),D()(Ht.Z,Jt),Ht.Z&&Ht.Z.locals&&Ht.Z.locals;var Wt=(0,I.Z)(Vt,(function(){var t=this,e=t._self._c;return e("AppNavigationItem",{key:"navigation-outbox",attrs:{id:"navigation-outbox",title:t.t("mail","Outbox"),to:t.to},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconOutbox",{staticClass:"outbox-opacity-icon",attrs:{size:20}})]},proxy:!0},{key:"counter",fn:function(){return[t.count?e("CounterBubble",{staticClass:"navigation-outbox__unread-counter"},[t._v("\n\t\t\t"+t._s(t.count)+"\n\t\t")]):t._e()]},proxy:!0}])})}),[],!1,null,"701039d4",null).exports,Qt=r(99270),Xt=r(41447),te=r(79542),ee={name:"KeyboardShortcuts",components:{Modal:o.Jc}},ne=r(87507),re={};re.styleTagTransform=K(),re.setAttributes=z(),re.insert=$().bind(null,"head"),re.domAPI=B(),re.insertStyleElement=U(),D()(ne.Z,re),ne.Z&&ne.Z.locals&&ne.Z.locals;var oe=(0,I.Z)(ee,(function(){var t=this,e=t._self._c;return e("Modal",{attrs:{size:"large",title:t.t("mail","Keyboard shortcut")},on:{close:function(e){return t.$emit("close")}}},[e("h2",[t._v(t._s(t.t("mail","Keyboard shortcuts")))]),t._v(" "),e("p",[t._v(t._s(t.t("mail","Speed up your Mail experience with these quick shortcuts.")))]),t._v(" "),e("dl",[e("div",[e("dt",[e("kbd",[t._v("C")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Compose new message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("←")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Newer message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("→")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Older message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("S")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle star")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("U")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle unread")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("A")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Archive")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Del")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Delete")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("F")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Search")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("Enter")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Send")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("R")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Refresh")))])])])])}),[],!1,null,"17eaba5f",null).exports,ie=r(20629),ae=r(80351),ce=r.n(ae),se=r(22079),le=r.n(se);function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function de(t){var e="function"==typeof Map?new Map:void 0;return de=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return fe(t,arguments,ve(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),he(r,t)},de(t)}function fe(t,e,n){return fe=pe()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&he(o,n.prototype),o},fe.apply(null,arguments)}function pe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}function ve(t){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ve(t)}function me(t,e){var n=new(le().util.ByteBuffer)(t),r=le().asn1.fromDer(n),o=le().pkcs12.pkcs12FromAsn1(r,e),i=function(t){return o.getBags({bagType:t})[t]},a=i(le().pki.oids.certBag),c=i(le().pki.oids.pkcs8ShroudedKeyBag);if(0===a.length)throw new be("The PKCS #12 certificate must contain at least one certificate");if(1!==c.length)throw new be("The PKCS #12 certificate must contain a single key");return{certificate:le().pki.certificateToPem(a[0].cert),privateKey:le().pki.privateKeyToPem(c[0].key)}}var be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(i,t);var e,n,r,o=(n=i,r=pe(),function(){var t,e=ve(n);if(r){var o=ve(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).name=i.name,t}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(de(Error));function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function ye(){ye=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new k(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==ge(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Ae(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function xe(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ae(i,r,o,a,c,"next",t)}function c(t){Ae(i,r,o,a,c,"throw",t)}a(void 0)}))}}function we(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?we(Object(n),!0).forEach((function(e){_e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _e(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ge(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ge(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ke="pkcs12",Se={name:"SmimeCertificateModal",components:{NcModal:o.Jc,NcButton:o.P2,NcPasswordField:o.pS,NcEmptyContent:o.SL,DeleteIcon:y.Z},data:function(){return{TYPE_PKCS12:ke,TYPE_PEM:"pem",moment:ce(),showImportScreen:!1,loading:!1,certificateType:ke,certificate:void 0,privateKey:void 0,password:""}},computed:Ce(Ce({},(0,ie.Se)({certificates:"getSmimeCertificates"})),{},{inputFormIsValid:function(){return!!this.certificate}}),mounted:function(){var t=this;return xe(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchSmimeCertificates");case 2:case"end":return e.stop()}}),e)})))()},methods:{deleteCertificate:function(t){var e=this;return xe(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("deleteSmimeCertificate",t);case 2:case"end":return n.stop()}}),n)})))()},uploadCertificate:function(){var e=this;return xe(ye().mark((function n(){var r,o,i,a,c;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.$refs.certificate.files[0],e.certificateType!==ke){n.next=19;break}return n.prev=2,n.t0=me,n.next=6,r.arrayBuffer();case 6:n.t1=n.sent,n.t2=e.password,i=(0,n.t0)(n.t1,n.t2),r=new Blob([i.certificate]),o=new Blob([i.privateKey]),n.next=17;break;case 13:return n.prev=13,n.t3=n.catch(2),n.t3.name===be.name?(f.Z.error("PKCS #12 certificate contains multiple certs or keys",{error:n.t3}),(0,Ct.x2)(t("mail","The provided PKCS #12 certificate must contain at least one certificate and exactly one private key."))):(f.Z.debug("Is probably not a PKCS #12 certificate or the password is wrong",{error:n.t3}),(0,Ct.x2)(t("mail","Failed to import the certificate. Please check the password."))),n.abrupt("return");case 17:n.next=24;break;case 19:if("pem"!==e.certificateType){n.next=23;break}o=e.$refs.privateKey.files[0],n.next=24;break;case 23:return n.abrupt("return");case 24:return e.loading=!0,n.prev=25,n.next=28,e.$store.dispatch("createSmimeCertificate",{certificate:r,privateKey:o});case 28:(0,Ct.s$)(t("mail","Certificate imported successfully")),e.resetImportForm(),n.next=36;break;case 32:n.prev=32,n.t4=n.catch(25),f.Z.error("Failed to import a S/MIME certificate: ".concat(null===(a=n.t4.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.data),{error:n.t4}),o?(0,Ct.x2)(t("mail","Failed to import the certificate. Please make sure that the private key matches the certificate and is not protected by a passphrase.")):(0,Ct.x2)(t("mail","Failed to import the certificate"));case 36:return n.prev=36,e.loading=!1,n.finish(36);case 39:case"end":return n.stop()}}),n,null,[[2,13],[25,32,36,39]])})))()},resetImportForm:function(){this.certificateType=ke,this.showImportScreen=!1,this.certificate=void 0,this.privateKey=void 0,this.password=""}}},Ie=r(93385),Ee={};Ee.styleTagTransform=K(),Ee.setAttributes=z(),Ee.insert=$().bind(null,"head"),Ee.domAPI=B(),Ee.insertStyleElement=U(),D()(Ie.Z,Ee),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;var Le=(0,I.Z)(Se,(function(){var t=this,e=t._self._c;return e("NcModal",{on:{close:function(e){return t.$emit("close")}}},[e("div",{staticClass:"certificate-modal"},[t.showImportScreen?e("form",{staticClass:"certificate-modal__import",on:{submit:function(e){return e.preventDefault(),t.uploadCertificate.apply(null,arguments)}}},[e("h2",[t._v(t._s(t.t("mail","Import S/MIME certificate")))]),t._v(" "),e("fieldset",{staticClass:"certificate-modal__import__type"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pkcs12",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PKCS12,checked:t._q(t.certificateType,t.TYPE_PKCS12)},on:{change:function(e){t.certificateType=t.TYPE_PKCS12}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pkcs12"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PKCS #12 Certificate"))+"\n\t\t\t\t\t")])]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pem",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PEM,checked:t._q(t.certificateType,t.TYPE_PEM)},on:{change:function(e){t.certificateType=t.TYPE_PEM}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pem"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PEM Certificate"))+"\n\t\t\t\t\t")])])]),t._v(" "),e("fieldset",[e("label",{attrs:{for:"certificate"}},[t._v(t._s(t.t("mail","Certificate")))]),t._v(" "),e("input",{ref:"certificate",attrs:{id:"certificate",type:"file",required:""},on:{change:function(e){t.certificate=e.target.files[0]}}})]),t._v(" "),t.certificateType===t.TYPE_PEM?e("fieldset",[e("label",{attrs:{for:"private-key"}},[t._v(t._s(t.t("mail","Private key (optional)")))]),t._v(" "),e("input",{ref:"privateKey",attrs:{id:"private-key",type:"file"},on:{change:function(e){t.privateKey=e.target.files[0]}}})]):t._e(),t._v(" "),t.certificateType===t.TYPE_PKCS12?e("fieldset",[e("label",{attrs:{for:"password"}},[t._v(t._s(t.t("mail","Password")))]),t._v(" "),e("NcPasswordField",{attrs:{value:t.password,label:t.t("mail","Password")},on:{"update:value":function(e){t.password=e}}})],1):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__import__hints"},[t.certificateType===t.TYPE_PEM?e("p",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","The private key is only required if you intend to send signed and encrypted emails using this certificate."))+"\n\t\t\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"certificate-modal__import__actions"},[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Back")},on:{click:t.resetImportForm}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Back"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Submit"),"native-type":"submit",disabled:t.loading||!t.inputFormIsValid}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Submit"))+"\n\t\t\t\t")])],1)]):e("div",{staticClass:"certificate-modal__list"},[e("h2",[t._v(t._s(t.t("mail","S/MIME certificates")))]),t._v(" "),e("table",{staticClass:"certificate-modal__list__table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.t("mail","Certificate name")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","E-mail address")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","Valid until")))]),t._v(" "),e("th")])]),t._v(" "),e("tbody",t._l(t.certificates,(function(n){return e("tr",{key:n.id},[e("td",[t._v(t._s(n.info.commonName))]),t._v(" "),e("td",[t._v(t._s(n.info.emailAddress))]),t._v(" "),e("td",[t._v(t._s(t.moment.unix(n.info.notAfter).format("LL")))]),t._v(" "),e("td",[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Delete certificate")},on:{click:function(e){return t.deleteCertificate(n.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete certificate"),size:20}})]},proxy:!0}],null,!0)})],1)])})),0)]),t._v(" "),0===t.certificates.length?e("NcEmptyContent",{staticClass:"certificate__empty",attrs:{title:t.t("mail","No certificate imported yet")}}):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__list__actions"},[e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Import certificate")},on:{click:function(e){t.showImportScreen=!0}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Import certificate"))+"\n\t\t\t\t")])],1)],1)])])}),[],!1,null,"7e3b11da",null),Oe=Le.exports;function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Pe(){Pe=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),c=new k(o||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==e&&n.call(b,i)&&(v=b);var g=h.prototype=f.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,c){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Me(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(A.prototype),s(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Te(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var je={name:"AppSettingsMenu",components:{ButtonVue:o.P2,KeyboardShortcuts:oe,IconInfo:h.Z,IconEmail:Xt.Z,IconAdd:Qt.Z,IconLoading:o.lb,IconLock:te.Z,SmimeCertificateModal:Oe},data:function(){return{loadingAvatarSettings:!1,optOutSettingsText:t("mail","Allow the app to collect data about your interactions. Based on this data, the app will adapt to your preferences. The data will only be stored locally."),loadingOptOutSettings:!1,replySettingsText:t("mail","Put my text to the bottom of a reply instead of on top of it."),loadingReplySettings:!1,displayKeyboardShortcuts:!1,autoTaggingText:t("mail","Automatically classify importance of new email"),toggleAutoTagging:!1,displaySmimeCertificateModal:!1}},computed:{useBottomReplies:function(){return"bottom"===this.$store.getters.getPreference("reply-mode","top")},useExternalAvatars:function(){return"true"===this.$store.getters.getPreference("external-avatars","true")},useDataCollection:function(){return"true"===this.$store.getters.getPreference("collect-data","true")},useAutoTagging:function(){return"true"===this.$store.getters.getPreference("tag-classified-messages","true")},allowNewMailAccounts:function(){return this.$store.getters.getPreference("allow-new-accounts",!0)}},methods:{onToggleButtonReplies:function(t){var e=this;this.loadingReplySettings=!0,this.$store.dispatch("savePreference",{key:"reply-mode",value:t.target.checked?"bottom":"top"}).catch((function(t){return f.Z.error("could not save preferences",{error:t})})).then((function(){e.loadingReplySettings=!1}))},onToggleExternalAvatars:function(t){var e=this;this.loadingAvatarSettings=!0,this.$store.dispatch("savePreference",{key:"external-avatars",value:t.target.checked?"true":"false"}).catch((function(t){return f.Z.error("could not save preferences",{error:t})})).then((function(){e.loadingAvatarSettings=!1}))},onToggleCollectData:function(t){var e=this;this.loadingOptOutSettings=!0,this.$store.dispatch("savePreference",{key:"collect-data",value:t.target.checked?"true":"false"}).catch((function(t){return f.Z.error("could not save preferences",{error:t})})).then((function(){e.loadingOptOutSettings=!1}))},onToggleAutoTagging:function(e){var n,r=this;return(n=Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.toggleAutoTagging=!0,n.prev=1,n.next=4,r.$store.dispatch("savePreference",{key:"tag-classified-messages",value:e.target.checked?"true":"false"});case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(1),f.Z.error("could not save preferences",{error:n.t0}),(0,Ct.x2)(t("mail","Could not update preference"));case 10:return n.prev=10,r.toggleAutoTagging=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[1,6,10,13]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Te(i,r,o,a,c,"next",t)}function c(t){Te(i,r,o,a,c,"throw",t)}a(void 0)}))})()},registerProtocolHandler:function(){if(window.navigator.registerProtocolHandler){var t=window.location.protocol+"//"+window.location.host+(0,c.generateUrl)("apps/mail/compose?uri=%s");try{window.navigator.registerProtocolHandler("mailto",t,OC.theme.name+" Mail")}catch(t){f.Z.error("could not register protocol handler",{err:t})}}},showKeyboardShortcuts:function(){this.displayKeyboardShortcuts=!0},closeKeyboardShortcuts:function(){this.displayKeyboardShortcuts=!1},toggleKeyboardShortcuts:function(){this.displayKeyboardShortcuts=!this.displayKeyboardShortcuts}}},Ne=je,De=r(99623),Ze={};Ze.styleTagTransform=K(),Ze.setAttributes=z(),Ze.insert=$().bind(null,"head"),Ze.domAPI=B(),Ze.insertStyleElement=U(),D()(De.Z,Ze),De.Z&&De.Z.locals&&De.Z.locals;var Be=(0,I.Z)(Ne,(function(){var t=this,e=t._self._c;return e("div",[t.allowNewMailAccounts?e("router-link",{staticClass:"app-settings-button button primary new-button",attrs:{to:"/setup"}},[e("IconAdd",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.t("mail","Add mail account"))+"\n\t")],1):t._e(),t._v(" "),t.loadingOptOutSettings?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.optOutSettingsText)+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"data-collection-toggle",type:"checkbox"},domProps:{checked:t.useDataCollection},on:{change:t.onToggleCollectData}}),t._v(" "),e("label",{attrs:{for:"data-collection-toggle"}},[t._v(t._s(t.optOutSettingsText))])]),t._v(" "),t.toggleAutoTagging?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.autoTaggingText)+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"auto-tagging-toggle",type:"checkbox"},domProps:{checked:t.useAutoTagging},on:{change:t.onToggleAutoTagging}}),t._v(" "),e("label",{attrs:{for:"auto-tagging-toggle"}},[t._v(t._s(t.autoTaggingText))])]),t._v(" "),t.loadingAvatarSettings?e("p",{staticClass:"app-settings avatar-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.t("mail","Use Gravatar and favicon avatars"))+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"gravatar-enabled",type:"checkbox"},domProps:{checked:t.useExternalAvatars},on:{change:t.onToggleExternalAvatars}}),t._v(" "),e("label",{attrs:{for:"gravatar-enabled"}},[t._v(t._s(t.t("mail","Use Gravatar and favicon avatars")))])]),t._v(" "),t.loadingReplySettings?e("p",{staticClass:"app-settings reply-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.replySettingsText)+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"bottom-reply-enabled",type:"checkbox"},domProps:{checked:t.useBottomReplies},on:{change:t.onToggleButtonReplies}}),t._v(" "),e("label",{attrs:{for:"bottom-reply-enabled"}},[t._v(t._s(t.replySettingsText))])]),t._v(" "),e("p",[e("ButtonVue",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Register as application for mail links")},on:{click:t.registerProtocolHandler},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmail",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Register as application for mail links"))+"\n\t\t")])],1),t._v(" "),e("ButtonVue",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Show keyboard shortcuts")},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showKeyboardShortcuts.apply(null,arguments)},shortkey:t.toggleKeyboardShortcuts},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Show keyboard shortcuts"))+"\n\t")]),t._v(" "),t.displayKeyboardShortcuts?e("KeyboardShortcuts",{on:{close:t.closeKeyboardShortcuts}}):t._e(),t._v(" "),e("ButtonVue",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Manage S/MIME certificates")},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.displaySmimeCertificateModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLock",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Manage S/MIME certificates"))+"\n\t")]),t._v(" "),t.displaySmimeCertificateModal?e("SmimeCertificateModal",{on:{close:function(e){t.displaySmimeCertificateModal=!1}}}):t._e(),t._v(" "),e("p",{staticClass:"mailvelope-section"},[t._v("\n\t\t"+t._s(t.t("mail","Looking for a way to encrypt your emails?"))+"\n\t")]),t._v(" "),e("a",{attrs:{href:"https://www.mailvelope.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("\n\t\t"+t._s(t.t("mail","Install Mailvelope browser extension here"))+"\n\t")])],1)}),[],!1,null,"04061aaf",null),Fe=Be.exports,$e={name:"Navigation",components:{AppNavigation:o.yS,AppNavigationSettings:o.AR,AppNavigationSpacer:o.NI,AppSettingsMenu:Fe,NavigationAccount:L,NavigationAccountExpandCollapse:H,NavigationMailbox:Kt,NavigationOutbox:Wt,NewMessageButtonHeader:i.Z,IconSetting:v.default},data:function(){return{refreshing:!1}},computed:{menu:function(){var t=this;return this.$store.getters.accounts.filter((function(t){return t.id!==bt.y9})).map((function(e){var n=t.$store.getters.getMailboxes(e.id),r=n.filter((function(n){return t.isCollapsed(e,n)})).length>1;return{id:e.id,account:e,mailboxes:n,isCollapsible:r}}))},unifiedAccount:function(){return this.$store.getters.getAccount(bt.y9)},unifiedMailboxes:function(){return this.$store.getters.getMailboxes(bt.y9)},passwordIsUnavailable:function(){return this.$store.getters.getPreference("password-is-unavailable",!1)},outboxMessages:function(){return this.$store.getters["outbox/getAllMessages"]}},methods:{isCollapsed:function(t,e){return"inbox"!==e.specialRole&&e.databaseId!==t.draftsMailboxId&&e.databaseId!==t.sentMailboxId&&e.databaseId!==t.trashMailboxId},isFirst:function(t){return t===this.$store.getters.accounts[1]},isLast:function(t){var e=this.$store.getters.accounts;return t===e[e.length-1]},isDisabled:function(t){return this.passwordIsUnavailable&&!!t.provisioningId}}},Ge=r(81895),ze={};ze.styleTagTransform=K(),ze.setAttributes=z(),ze.insert=$().bind(null,"head"),ze.domAPI=B(),ze.insertStyleElement=U(),D()(Ge.Z,ze),Ge.Z&&Ge.Z.locals&&Ge.Z.locals;var Re=(0,I.Z)($e,(function(){var t=this,e=t._self._c;return e("AppNavigation",{scopedSlots:t._u([{key:"list",fn:function(){return[t._l(t.unifiedMailboxes,(function(n){return e("NavigationMailbox",{key:"mailbox-"+n.databaseId,attrs:{account:t.unifiedAccount,mailbox:n}})})),t._v(" "),e("AppNavigationSpacer"),t._v(" "),t._l(t.menu,(function(n){return[n.account?e("NavigationAccount",{key:n.account.id,attrs:{account:n.account,"first-mailbox":n.mailboxes[0],"is-first":t.isFirst(n.account),"is-last":t.isLast(n.account),"is-disabled":t.isDisabled(n.account)}}):t._e(),t._v(" "),t.isDisabled(n.account)?t._e():[t._l(n.mailboxes,(function(r){return[e("NavigationMailbox",{directives:[{name:"show",rawName:"v-show",value:!n.isCollapsible||!n.account.collapsed||!t.isCollapsed(n.account,r),expression:"\n\t\t\t\t\t\t\t!group.isCollapsible ||\n\t\t\t\t\t\t\t\t!group.account.collapsed ||\n\t\t\t\t\t\t\t\t!isCollapsed(group.account, item)\n\t\t\t\t\t\t"}],key:"mailbox-"+r.databaseId,attrs:{account:n.account,mailbox:r}}),t._v(" "),n.account.isUnified||"inbox"!==r.specialRole?t._e():e("NavigationMailbox",{key:r.databaseId+"-starred",attrs:{account:n.account,mailbox:r,filter:"starred"}})]})),t._v(" "),!n.account.isUnified&&n.isCollapsible?e("NavigationAccountExpandCollapse",{key:"collapse-"+n.account.id,attrs:{account:n.account}}):t._e(),t._v(" "),e("AppNavigationSpacer",{key:"spacer-"+n.account.id})]]}))]},proxy:!0},{key:"footer",fn:function(){return[0!==t.outboxMessages.length?e("div",{staticClass:"outbox__border"},[e("NavigationOutbox",{staticClass:"outbox"})],1):t._e(),t._v(" "),e("AppNavigationSettings",{attrs:{title:t.t("mail","Mail settings")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSetting",{attrs:{size:20}})]},proxy:!0}])},[t._v(" "),e("AppSettingsMenu")],1)]},proxy:!0}])},[e("NewMessageButtonHeader")],1)}),[],!1,null,"bb0d4a8a",null).exports},33125:function(t,e,n){"use strict";n.d(e,{Z:function(){return E}});var r=n(15961),o=n(99270),i=n(36272),a=n(64192),c=n.n(a),s=n(89177);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function d(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new I(o||[]);return r(a,"_invoke",{value:C(t,n,c)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=d;var p={};function h(){}function v(){}function m(){}var b={};s(b,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==e&&n.call(y,i)&&(b=y);var A=m.prototype=h.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,a,c){var s=f(t[r],t,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==l(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function C(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return v.prototype=m,r(A,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=s(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,c,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},x(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(A),s(A,c,"Generator"),s(A,i,(function(){return this})),s(A,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function d(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){d(i,r,o,a,c,"next",t)}function c(t){d(i,r,o,a,c,"throw",t)}a(void 0)}))}}var p={name:"NewMessageButtonHeader",components:{Button:r.P2,IconAdd:o.Z,IconRefresh:i.Z,IconLoading:c()},data:function(){return{refreshing:!1}},computed:{currentMailbox:function(){if("message"===this.$route.name||"mailbox"===this.$route.name)return this.$store.getters.getMailbox(this.$route.params.mailboxId)}},methods:{refreshMailbox:function(){var t=this;return f(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t.refreshing){e.next=3;break}return s.Z.debug("already sync'ing mailbox.. aborting"),e.abrupt("return");case 3:return t.refreshing=!0,e.prev=4,e.next=7,t.$store.dispatch("syncEnvelopes",{mailboxId:t.currentMailbox.databaseId});case 7:s.Z.debug("Current mailbox is sync'ing "),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),s.Z.error("could not sync current mailbox",{error:e.t0});case 13:return e.prev=13,t.refreshing=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})))()},onNewMessage:function(){var t=this;return f(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("startComposerSession",{isBlankMessage:!0});case 2:case"end":return e.stop()}}),e)})))()}}},h=n(93379),v=n.n(h),m=n(7795),b=n.n(m),g=n(90569),y=n.n(g),A=n(3565),x=n.n(A),w=n(19216),C=n.n(w),_=n(44589),k=n.n(_),S=n(68714),I={};I.styleTagTransform=k(),I.setAttributes=x(),I.insert=y().bind(null,"head"),I.domAPI=b(),I.insertStyleElement=C(),v()(S.Z,I),S.Z&&S.Z.locals&&S.Z.locals;var E=(0,n(51900).Z)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("Button",{staticClass:"new-message-button",attrs:{"aria-label":t.t("mail","New message"),type:"primary","button-id":"mail_new_message",role:"complementary",wide:!0},on:{click:t.onNewMessage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","New message"))+"\n\t")]),t._v(" "),t.currentMailbox?e("Button",{staticClass:"refresh__button",attrs:{"aria-label":t.t("mail","Refresh"),type:"tertiary-no-background",disabled:t.refreshing},on:{click:t.refreshMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[t.refreshing?t._e():e("IconRefresh",{attrs:{size:20}}),t._v(" "),t.refreshing?e("IconLoading",{attrs:{size:20}}):t._e()]},proxy:!0}],null,!1,2669673868)}):t._e()],1)}),[],!1,null,"3cf3fe54",null).exports},82659:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r={name:"ImportantIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},o=(0,n(51900).Z)(r,(function(t,e){return t("span",e._g(e._b({staticClass:"material-design-icon important-icon",class:[e.data.class,e.data.staticClass],attrs:{"aria-hidden":!e.props.title,"aria-label":e.props.title,role:"img"}},"span",e.data.attrs,!1),e.listeners),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.props.fillColor,width:e.props.size,height:e.props.size,viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),e._v(" "),t("path",{attrs:{d:"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z"}})])])}),[],!0,null,null,null).exports},25819:function(){}}]);
//# sourceMappingURL=mail.267.194829a7be03f1584184.js.map